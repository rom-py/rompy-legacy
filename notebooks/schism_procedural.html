
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>SCHISM procedural example &#8212; rompy 0.1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=01f34227"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/schism_procedural';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Documentation" href="../api.html" />
    <link rel="prev" title="SWAN Physics Components" href="physics.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">rompy 0.1.0 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../quickstart.html">
    Quickstart
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../core_concepts.html">
    Core Concepts
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../models.html">
    Models
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../demo.html">
    Demonstration notebooks
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api.html">
    API  Documentation
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/rom-py/rompy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../quickstart.html">
    Quickstart
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../core_concepts.html">
    Core Concepts
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../models.html">
    Models
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../demo.html">
    Demonstration notebooks
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API  Documentation
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/rom-py/rompy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_concepts.html">Core Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../demo.html">Demonstration notebooks</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../demo.html#thumbnails-gallery">Thumbnails gallery</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="demo.html">Basic demonstration</a></li>
<li class="toctree-l3"><a class="reference internal" href="demo.html#Command-line-interface">Command line interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="templates_demo.html">Templates demonstration</a></li>
<li class="toctree-l3"><a class="reference internal" href="swan/example_declarative.html">SWAN declarative example</a></li>
<li class="toctree-l3"><a class="reference internal" href="swan/example_procedural.html">SWAN procedural example</a></li>
<li class="toctree-l3"><a class="reference internal" href="swan/example_sensitivity.html">SWAN sensitivity example</a></li>
<li class="toctree-l3"><a class="reference internal" href="oceanum_example.html">Working demonstration</a></li>
<li class="toctree-l3"><a class="reference internal" href="swan-config-components.html">Model components</a></li>
<li class="toctree-l3"><a class="reference internal" href="physics.html">SWAN Physics Components</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SCHISM procedural example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Frontmatter">Frontmatter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Workspace-basepath">Workspace basepath</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Model-Grid">Model Grid</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Forcing-data">Forcing data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Sflux-Data">Sflux Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Ocean-Boundary">Ocean Boundary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Wave">Wave</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Tidal-data">Tidal data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Full-config-object">Full config object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Model-Run">Model Run</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Generate-workspace">Generate workspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="#And-a-DataBlob-symlink">And a DataBlob symlink</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Run-schism">Run schism</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Check-results">Check results</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Running-from-configuration-files.">Running from configuration files.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API  Documentation</a></li>
</ul>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../demo.html" class="nav-link">Demonstration notebooks</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">SCHISM...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="SCHISM-procedural-example">
<h1>SCHISM procedural example<a class="headerlink" href="#SCHISM-procedural-example" title="Link to this heading">#</a></h1>
<p>In this notebook we will use the SCHOSM grid, config and data objects to define a SCHISM workspace</p>
<section id="Frontmatter">
<h2>Frontmatter<a class="headerlink" href="#Frontmatter" title="Link to this heading">#</a></h2>
<p>Required inputs and defination of a few helper functions</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2

<span class="c1"># turn off warnings</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>


<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">rompy.core</span> <span class="kn">import</span> <span class="n">DataBlob</span><span class="p">,</span> <span class="n">TimeRange</span>
<span class="kn">from</span> <span class="nn">shutil</span> <span class="kn">import</span> <span class="n">rmtree</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">intake</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="n">HERE</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;./rompy/tests/schism&#39;</span><span class="p">)</span>



<span class="c1"># Define some useful functions for plotting outputs</span>

<span class="kn">from</span> <span class="nn">matplotlib.tri</span> <span class="kn">import</span> <span class="n">Triangulation</span>
<span class="kn">import</span> <span class="nn">cartopy.feature</span> <span class="k">as</span> <span class="nn">cfeature</span>
<span class="c1">#import cartopy.mpl.ticker as cticker</span>
<span class="kn">from</span> <span class="nn">cartopy.io.shapereader</span> <span class="kn">import</span> <span class="n">Reader</span>
<span class="kn">from</span> <span class="nn">cartopy.feature</span> <span class="kn">import</span> <span class="n">ShapelyFeature</span>

<span class="kn">from</span> <span class="nn">cartopy.mpl.ticker</span> <span class="kn">import</span> <span class="n">LongitudeFormatter</span><span class="p">,</span> <span class="n">LatitudeFormatter</span>
<span class="n">lon_formatter</span> <span class="o">=</span> <span class="n">LongitudeFormatter</span><span class="p">()</span>
<span class="n">lat_formatter</span> <span class="o">=</span> <span class="n">LatitudeFormatter</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">pyproj</span> <span class="kn">import</span> <span class="n">Proj</span><span class="p">,</span> <span class="n">transform</span>
<span class="kn">import</span> <span class="nn">pytz</span>

<span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">KDTree</span>
<span class="kn">from</span> <span class="nn">scipy.interpolate</span> <span class="kn">import</span> <span class="n">griddata</span>

<span class="k">def</span> <span class="nf">schism_load</span><span class="p">(</span><span class="n">schfile</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Ron: Load schism output file and parse the element/node values to create a (matplotlib) trimesh object for plotting</span>

<span class="sd">    Returns xarray dataset and trimesh object</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">schout</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">schfile</span><span class="p">)</span>
    <span class="n">elems</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_face_nodes</span><span class="p">[:,:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1"># Ron: get lat/lon coordinates of nodes - weird it appears x,y are switched</span>
    <span class="n">lons</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_y</span><span class="o">.</span><span class="n">values</span>
    <span class="n">lats</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_x</span><span class="o">.</span><span class="n">values</span>
    <span class="c1"># create trimesh object</span>
    <span class="n">meshtri</span> <span class="o">=</span> <span class="n">Triangulation</span><span class="p">(</span><span class="n">lats</span><span class="p">,</span> <span class="n">lons</span><span class="p">,</span> <span class="n">triangles</span><span class="o">=</span><span class="n">elems</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">schout</span><span class="p">,</span> <span class="n">meshtri</span>

<span class="k">def</span> <span class="nf">schism_plot</span><span class="p">(</span><span class="n">schout</span><span class="p">,</span> <span class="n">meshtri</span><span class="p">,</span><span class="n">varname</span><span class="p">,</span><span class="n">varscale</span><span class="o">=</span><span class="p">[],</span><span class="n">bbox</span><span class="o">=</span><span class="p">[],</span><span class="n">time</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span><span class="n">mask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">vectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">plotmesh</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">project</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">50</span><span class="p">],</span>
                <span class="n">pscale</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">jet</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    plot output variable in xarray dataset (schout) using mesh information meshtri.</span>
<span class="sd">    input:</span>
<span class="sd">        schout: xarray dataset returned by def schism_load</span>
<span class="sd">        meshtri: (matplotlib) trimesh object returned by def schism_load</span>
<span class="sd">        varname: name of data variable in schout</span>
<span class="sd">        OPTIONAL:</span>
<span class="sd">            varscale: min/max plotting colour values (defalts to min/max)</span>
<span class="sd">            bbox: bounding box for plotting [minlon,minlat,maxlon,maxlat] (defalts to data bounds)</span>
<span class="sd">            time: time to plot (if a variable dimension), can be int (index) or datetime64-like object</span>
<span class="sd">            plotmesh: plot the grid mesh (elemment boundaries)</span>
<span class="sd">            project: use a map projection (cartopy, so that e.g. gis data can be added - this is slower</span>
<span class="sd">            mask: mask out parts of the SCHISM output based on a minumum depth threshold</span>
<span class="sd">    Returns xarray dataset and</span>
<span class="sd">    We should modify this to load multiple files ... probably need assistance from DASK</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;time&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">dims</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">time</span><span class="p">)</span><span class="o">==</span><span class="nb">int</span> <span class="p">:</span> <span class="c1"># input ts is index</span>
            <span class="n">schout</span><span class="o">=</span><span class="n">schout</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># assume is datetime64-like object</span>
            <span class="n">schout</span><span class="o">=</span><span class="n">schout</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>
    <span class="c1"># By default, plot depth contours</span>
    <span class="c1"># ... I like depth to be z (negative)</span>
    <span class="n">z</span><span class="o">=</span><span class="n">schout</span><span class="o">.</span><span class="n">depth</span><span class="o">*-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">contours</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">contours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">contours</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">contours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">contours</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">varname</span><span class="o">==</span><span class="s1">&#39;depth&#39;</span> <span class="ow">or</span> <span class="n">varname</span><span class="o">==</span><span class="s1">&#39;z&#39;</span><span class="p">:</span>
        <span class="n">var</span> <span class="o">=</span> <span class="n">z</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">var</span><span class="o">=</span><span class="n">schout</span><span class="p">[</span><span class="n">varname</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">varscale</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">vmin</span><span class="o">=</span><span class="n">var</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="n">vmax</span><span class="o">=</span><span class="n">var</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vmin</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="n">varscale</span>
    <span class="k">if</span> <span class="n">project</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">meshtri</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">meshtri</span><span class="o">.</span><span class="n">y</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">pscale</span><span class="p">,</span><span class="n">pscale</span><span class="p">),</span>
            <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()})</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span><span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">plotmesh</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">triplot</span><span class="p">(</span><span class="n">meshtri</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="c1">### MASKING ** doesnt work with tripcolor, must use tricontouf ###############################</span>
    <span class="c1"># mask all places in the grid where depth is greater than elev (i.e. are &quot;dry&quot;) by threshold below</span>
    <span class="k">if</span> <span class="n">mask</span><span class="p">:</span>
        <span class="c1"># temp=var.values</span>
        <span class="c1"># threshold of + 0.05 seems pretty good   *** But do we want to use the minimum depth</span>
        <span class="c1"># defined in the SCHISM input (H0) and in output schout.minimum_depth</span>
        <span class="c1"># bad_idx= schout.elev.values+schout.depth.values&lt;0.05</span>
        <span class="n">bad_idx</span><span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">elev</span><span class="o">.</span><span class="n">values</span><span class="o">+</span><span class="n">schout</span><span class="o">.</span><span class="n">depth</span><span class="o">.</span><span class="n">values</span> <span class="o">&lt;</span> <span class="n">schout</span><span class="o">.</span><span class="n">minimum_depth</span><span class="o">.</span><span class="n">values</span>
        <span class="c1"># new way</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">bad_idx</span><span class="p">[</span><span class="n">meshtri</span><span class="o">.</span><span class="n">triangles</span><span class="p">],</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">meshtri</span><span class="o">.</span><span class="n">set_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>

        <span class="n">extend</span><span class="o">=</span><span class="s1">&#39;neither&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">&lt;</span><span class="n">vmin</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&gt;</span><span class="n">vmax</span><span class="p">):</span>
            <span class="n">extend</span><span class="o">=</span><span class="s1">&#39;both&#39;</span>
        <span class="k">elif</span> <span class="n">var</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">&lt;</span><span class="n">vmin</span><span class="p">:</span>
            <span class="n">extend</span><span class="o">=</span><span class="s1">&#39;min&#39;</span>
        <span class="k">elif</span> <span class="n">var</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&gt;</span><span class="n">vmax</span><span class="p">:</span>
            <span class="n">extend</span><span class="o">=</span><span class="s1">&#39;max&#39;</span>

        <span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">tricontourf</span><span class="p">(</span><span class="n">meshtri</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span><span class="n">levels</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">extend</span><span class="o">=</span><span class="n">extend</span><span class="p">)</span>
    <span class="c1">#no mask#############################################################</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">tripcolor</span><span class="p">(</span><span class="n">meshtri</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
        <span class="c1"># quiver variables if asked</span>
    <span class="k">if</span> <span class="n">vectors</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;WWM&#39;</span><span class="p">,</span><span class="n">varname</span><span class="p">):</span>
            <span class="n">vtype</span><span class="o">=</span><span class="s1">&#39;waves&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vtype</span><span class="o">=</span><span class="s1">&#39;currents&#39;</span>
        <span class="n">LonI</span><span class="p">,</span><span class="n">LatI</span><span class="p">,</span><span class="n">UI</span><span class="p">,</span><span class="n">VI</span><span class="o">=</span><span class="n">schism_calculate_vectors</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">schout</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">vtype</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="n">LonI</span><span class="p">,</span><span class="n">LatI</span><span class="p">,</span><span class="n">UI</span><span class="p">,</span><span class="n">VI</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>

    <span class="n">con</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">tricontour</span><span class="p">(</span><span class="n">meshtri</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">contours</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
    <span class="c1"># ax.clabel(con, con.levels, inline=True, fmt=&#39;%i&#39;, fontsize=12)</span>
    <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">project</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># draw lat/lon grid lines every n degrees.</span>
        <span class="c1">#  n = (max(lat)-min(lat))/8</span>
        <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mi">5</span>
        <span class="k">for</span> <span class="n">fac</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">]:</span>
            <span class="n">nr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span>
            <span class="k">if</span> <span class="n">nr</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">n</span><span class="o">=</span><span class="n">nr</span>
                <span class="n">xticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span><span class="o">+</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
                <span class="n">yticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span><span class="o">+</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
                <span class="k">break</span>
<span class="c1">#        ax.set_xticks(xticks, crs=ccrs.PlateCarree()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>
<span class="c1">#         ax.set_xticklabels(np.arange(np.round(min(x)),np.round(max(x)),n))</span>
<span class="c1">#        ax.set_yticks(yticks, crs=ccrs.PlateCarree()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">yticks</span><span class="p">)</span>
<span class="c1">#         ax.set_yticklabels(np.arange(np.round(min(y)),np.round(max(y)),n))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_left</span><span class="p">()</span>
        <span class="c1">#lon_formatter = cticker.LongitudeFormatter()</span>
        <span class="c1">#lat_formatter = cticker.LatitudeFormatter()</span>
        <span class="c1"># New versions of marplotlib throw warnings on this - does it matter</span>
    <span class="c1"># ax.xaxis.set_major_formatter(lon_formatter)</span>
        <span class="c1"># ax.yaxis.set_major_formatter(lat_formatter)</span>
    <span class="c1">#ax.set_xticks(lon_formatter)</span>
    <span class="c1">#ax.set_yticks(lat_formatter)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">BORDERS</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">mappable</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span><span class="n">shrink</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">cbar</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span><span class="n">vmax</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">varname</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ax</span>

<span class="c1">#Nautical convention</span>
<span class="k">def</span> <span class="nf">pol2cart2</span><span class="p">(</span><span class="n">rho</span><span class="p">,</span> <span class="n">deg</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">pol2cart</span><span class="p">(</span><span class="n">rho</span><span class="p">,</span> <span class="n">deg</span><span class="o">/</span><span class="mf">180.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>

<span class="c1"># Cartesian convention</span>
<span class="k">def</span> <span class="nf">pol2cart</span><span class="p">(</span><span class="n">rho</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

<span class="k">def</span> <span class="nf">schism_calculate_vectors</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">schout</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="s1">&#39;waves&#39;</span><span class="p">,</span> <span class="n">dX</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">pUTM55</span> <span class="o">=</span> <span class="n">Proj</span><span class="p">(</span><span class="s1">&#39;epsg:32755&#39;</span><span class="p">)</span>
    <span class="c1"># pWGS84 = Proj(&#39;epsg:4326&#39;)</span>
    <span class="k">if</span> <span class="n">vtype</span><span class="o">==</span><span class="s1">&#39;waves&#39;</span><span class="p">:</span>
        <span class="n">idx</span><span class="o">=</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">WWM_1</span><span class="o">&gt;</span><span class="mf">0.05</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">elev</span><span class="o">-</span><span class="n">schout</span><span class="o">.</span><span class="n">depth</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="n">dp</span><span class="o">=</span><span class="n">schout</span><span class="o">.</span><span class="n">WWM_18</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
        <span class="c1"># hs=schout.WWM_1[idx]</span>
        <span class="n">hs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="p">[</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">pol2cart2</span><span class="p">(</span><span class="n">hs</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mod</span><span class="p">(</span><span class="n">dp</span><span class="o">+</span><span class="mi">180</span><span class="p">,</span> <span class="mi">360</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">vtype</span><span class="o">==</span><span class="s1">&#39;elev&#39;</span><span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;curr&#39;</span><span class="p">,</span><span class="n">vtype</span><span class="p">):</span>
        <span class="n">idx</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">dahv</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">schout</span><span class="o">.</span><span class="n">dahv</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">&gt;</span><span class="mf">0.01</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">dahv</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">dahv</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#dahv has u and v components, so use index of 1 for v and index of 0 for u</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*** Warning input vecter data not understood&#39;</span><span class="p">)</span>
    <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">pUTM55</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_x</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span><span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_y</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>
    <span class="n">xlim</span><span class="p">,</span><span class="n">ylim</span><span class="o">=</span><span class="n">pUTM55</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">(),</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>
    <span class="c1"># might have to play with this - we assume a total of 100 arrows a side will be pleasing</span>
    <span class="k">if</span> <span class="n">dX</span><span class="o">==</span><span class="s1">&#39;auto&#39;</span><span class="p">:</span>
        <span class="n">n</span><span class="o">=</span><span class="mi">30</span>
        <span class="n">dX</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">n</span><span class="p">)</span>
    <span class="n">xi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">dX</span><span class="p">,</span><span class="n">dX</span><span class="p">)</span>
    <span class="n">yi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">dX</span><span class="p">,</span><span class="n">dX</span><span class="p">)</span>
    <span class="n">XI</span><span class="p">,</span><span class="n">YI</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">xi</span><span class="p">,</span><span class="n">yi</span><span class="p">)</span>

    <span class="n">UI</span> <span class="o">=</span> <span class="n">griddata</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">u</span><span class="p">,(</span><span class="n">XI</span><span class="p">,</span><span class="n">YI</span><span class="p">),</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
    <span class="n">VI</span> <span class="o">=</span> <span class="n">griddata</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">v</span><span class="p">,(</span><span class="n">XI</span><span class="p">,</span><span class="n">YI</span><span class="p">),</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
    <span class="c1"># Create a mask so that place with very little data are removed</span>
    <span class="k">if</span> <span class="n">mask</span><span class="p">:</span>
        <span class="n">xbins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">dX</span><span class="p">,</span><span class="n">dX</span><span class="p">)</span>
        <span class="n">ybins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">dX</span><span class="p">,</span><span class="n">dX</span><span class="p">)</span>
        <span class="n">densityH</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="n">xbins</span><span class="p">,</span><span class="n">ybins</span><span class="p">])</span>
        <span class="n">densityH</span><span class="o">=</span><span class="n">densityH</span><span class="o">.</span><span class="n">T</span>
        <span class="c1"># might want to adjust this...</span>
        <span class="n">idx</span><span class="o">=</span><span class="n">densityH</span><span class="o">&lt;</span><span class="mi">1</span>
        <span class="n">UI</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span>
        <span class="n">VI</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span>
    <span class="n">LonI</span><span class="p">,</span><span class="n">LatI</span> <span class="o">=</span> <span class="n">pUTM55</span><span class="p">(</span><span class="n">XI</span><span class="p">,</span><span class="n">YI</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">LonI</span><span class="p">,</span><span class="n">LatI</span><span class="p">,</span><span class="n">UI</span><span class="p">,</span><span class="n">VI</span>
</pre></div>
</div>
</div>
</section>
<section id="Workspace-basepath">
<h2>Workspace basepath<a class="headerlink" href="#Workspace-basepath" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">workdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;schism_procedural&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">workdir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="n">rmtree</span><span class="p">(</span><span class="n">workdir</span><span class="p">)</span>

<span class="n">workdir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Model-Grid">
<h2>Model Grid<a class="headerlink" href="#Model-Grid" title="Link to this heading">#</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">HERE</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PosixPath(&#39;rompy/tests/schism&#39;)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span> <span class="o">/</span> <span class="s2">&quot;hgrid.gr3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PosixPath(&#39;rompy/tests/schism/test_data/hgrid.gr3&#39;)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>DataBlob<span class="o">??</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Init signature:</span>
DataBlob<span class="ansi-blue-fg">(</span>
    <span class="ansi-blue-fg">*</span><span class="ansi-blue-fg">,</span>
    model_type<span class="ansi-blue-fg">:</span> Literal<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;data_blob&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;data_link&#39;</span><span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">&#39;data_blob&#39;</span><span class="ansi-blue-fg">,</span>
    id<span class="ansi-blue-fg">:</span> str <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">&#39;data&#39;</span><span class="ansi-blue-fg">,</span>
    source<span class="ansi-blue-fg">:</span> cloudpathlib<span class="ansi-blue-fg">.</span>anypath<span class="ansi-blue-fg">.</span>AnyPath<span class="ansi-blue-fg">,</span>
    link<span class="ansi-blue-fg">:</span> bool <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">-&gt;</span> <span class="ansi-green-fg">None</span>
<span class="ansi-red-fg">Source:</span>
<span class="ansi-green-fg">class</span> DataBlob<span class="ansi-blue-fg">(</span>RompyBaseModel<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
    <span class="ansi-blue-fg">&#34;&#34;&#34;Data source for model ingestion.</span>

<span class="ansi-blue-fg">    Generic data source for files that either need to be copied to the model directory</span>
<span class="ansi-blue-fg">    or linked if `link` is set to True.</span>
<span class="ansi-blue-fg">    &#34;&#34;&#34;</span>

    model_type<span class="ansi-blue-fg">:</span> Literal<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#34;data_blob&#34;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;data_link&#34;</span><span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">=</span> Field<span class="ansi-blue-fg">(</span>
        default<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;data_blob&#34;</span><span class="ansi-blue-fg">,</span>
        description<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;Model type discriminator&#34;</span><span class="ansi-blue-fg">,</span>
    <span class="ansi-blue-fg">)</span>
    id<span class="ansi-blue-fg">:</span> str <span class="ansi-blue-fg">=</span> Field<span class="ansi-blue-fg">(</span>
        default<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;data&#34;</span><span class="ansi-blue-fg">,</span> description<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;Unique identifier for this data source&#34;</span>
    <span class="ansi-blue-fg">)</span>
    source<span class="ansi-blue-fg">:</span> AnyPath <span class="ansi-blue-fg">=</span> Field<span class="ansi-blue-fg">(</span>
        description<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;URI of the data source, either a local file path or a remote uri&#34;</span><span class="ansi-blue-fg">,</span>
    <span class="ansi-blue-fg">)</span>
    link<span class="ansi-blue-fg">:</span> bool <span class="ansi-blue-fg">=</span> Field<span class="ansi-blue-fg">(</span>
        default<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span> description<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;Whether to create a symbolic link instead of copying the file&#34;</span>
    <span class="ansi-blue-fg">)</span>
    _copied<span class="ansi-blue-fg">:</span> str <span class="ansi-blue-fg">=</span> PrivateAttr<span class="ansi-blue-fg">(</span>default<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">)</span>

    <span class="ansi-green-fg">def</span> get<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> destdir<span class="ansi-blue-fg">:</span> Union<span class="ansi-blue-fg">[</span>str<span class="ansi-blue-fg">,</span> Path<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span> name<span class="ansi-blue-fg">:</span> str <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">-&gt;</span> Path<span class="ansi-blue-fg">:</span>
        <span class="ansi-blue-fg">&#34;&#34;&#34;Copy or link the data source to a new directory.</span>

<span class="ansi-blue-fg">        Parameters</span>
<span class="ansi-blue-fg">        ----------</span>
<span class="ansi-blue-fg">        destdir : str | Path</span>
<span class="ansi-blue-fg">            The destination directory to copy or link the data source to.</span>

<span class="ansi-blue-fg">        Returns</span>
<span class="ansi-blue-fg">        -------</span>
<span class="ansi-blue-fg">        Path</span>
<span class="ansi-blue-fg">            The path to the copied file or created symlink.</span>
<span class="ansi-blue-fg">        &#34;&#34;&#34;</span>
        destdir <span class="ansi-blue-fg">=</span> Path<span class="ansi-blue-fg">(</span>destdir<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>resolve<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

        <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>link<span class="ansi-blue-fg">:</span>
            <span class="ansi-red-fg"># Create a symbolic link</span>
            <span class="ansi-green-fg">if</span> name<span class="ansi-blue-fg">:</span>
                symlink_path <span class="ansi-blue-fg">=</span> destdir <span class="ansi-blue-fg">/</span> name
            <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
                symlink_path <span class="ansi-blue-fg">=</span> destdir <span class="ansi-blue-fg">/</span> self<span class="ansi-blue-fg">.</span>source<span class="ansi-blue-fg">.</span>name

            <span class="ansi-red-fg"># Ensure the destination directory exists</span>
            destdir<span class="ansi-blue-fg">.</span>mkdir<span class="ansi-blue-fg">(</span>parents<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">,</span> exist_ok<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span>

            <span class="ansi-red-fg"># Remove existing symlink/file if it exists</span>
            <span class="ansi-green-fg">if</span> symlink_path<span class="ansi-blue-fg">.</span>exists<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
                symlink_path<span class="ansi-blue-fg">.</span>unlink<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

            <span class="ansi-red-fg"># Compute the relative path from destdir to self.source</span>
            relative_source_path <span class="ansi-blue-fg">=</span> os<span class="ansi-blue-fg">.</span>path<span class="ansi-blue-fg">.</span>relpath<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>source<span class="ansi-blue-fg">.</span>resolve<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> destdir<span class="ansi-blue-fg">)</span>

            <span class="ansi-red-fg"># Create symlink</span>
            os<span class="ansi-blue-fg">.</span>symlink<span class="ansi-blue-fg">(</span>relative_source_path<span class="ansi-blue-fg">,</span> symlink_path<span class="ansi-blue-fg">)</span>
            self<span class="ansi-blue-fg">.</span>_copied <span class="ansi-blue-fg">=</span> symlink_path

            <span class="ansi-green-fg">return</span> symlink_path
        <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
            <span class="ansi-red-fg"># Copy the data source</span>
            <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>source<span class="ansi-blue-fg">.</span>is_dir<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
                <span class="ansi-red-fg"># Copy directory</span>
                outfile <span class="ansi-blue-fg">=</span> copytree<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>source<span class="ansi-blue-fg">,</span> destdir<span class="ansi-blue-fg">)</span>
            <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
                <span class="ansi-green-fg">if</span> name<span class="ansi-blue-fg">:</span>
                    outfile <span class="ansi-blue-fg">=</span> destdir <span class="ansi-blue-fg">/</span> name
                <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
                    outfile <span class="ansi-blue-fg">=</span> destdir <span class="ansi-blue-fg">/</span> self<span class="ansi-blue-fg">.</span>source<span class="ansi-blue-fg">.</span>name
                <span class="ansi-green-fg">if</span> outfile<span class="ansi-blue-fg">.</span>resolve<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">!=</span> self<span class="ansi-blue-fg">.</span>source<span class="ansi-blue-fg">.</span>resolve<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
                    outfile<span class="ansi-blue-fg">.</span>write_bytes<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>source<span class="ansi-blue-fg">.</span>read_bytes<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
            self<span class="ansi-blue-fg">.</span>_copied <span class="ansi-blue-fg">=</span> outfile
            <span class="ansi-green-fg">return</span> outfile
<span class="ansi-red-fg">File:</span>           ~/rompy/rompy/core/data.py
<span class="ansi-red-fg">Type:</span>           ModelMetaclass
<span class="ansi-red-fg">Subclasses:</span>     DataGrid
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Grid object</span>

<span class="kn">from</span> <span class="nn">rompy.schism</span> <span class="kn">import</span> <span class="n">Inputs</span><span class="p">,</span> <span class="n">SCHISMGrid</span>

<span class="c1">#SCHISMGrid?</span>

<span class="c1"># Medium sized grid, will run one day in about 3 minutes on 48 cores</span>
<span class="n">hgrid</span> <span class="o">=</span> <span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span> <span class="o">/</span> <span class="s2">&quot;hgrid.gr3&quot;</span>

<span class="c1"># Fast running grid, will run in about 1 minute on 4 cores</span>
<span class="c1">#hgrid = HERE / &quot;test_data&quot; / &quot;hgrid_20kmto60km_rompyschism_testing.gr3&quot;</span>

<span class="n">grid</span><span class="o">=</span><span class="n">SCHISMGrid</span><span class="p">(</span>
    <span class="n">hgrid</span><span class="o">=</span><span class="n">DataBlob</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;hgrid&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">hgrid</span><span class="p">),</span>
    <span class="n">drag</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">grid</span><span class="o">.</span><span class="n">plot_hgrid</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:rompy.schism.grid:drag is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_9_1.png" src="../_images/notebooks_schism_procedural_9_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">workdir</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PosixPath(&#39;schism_procedural&#39;)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">workdir</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">workdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.schism.grid:Generated albedo with constant value of 0.15
INFO:rompy.schism.grid:Generated diffmin with constant value of 1e-06
INFO:rompy.schism.grid:Generated diffmax with constant value of 1.0
INFO:rompy.schism.grid:Generated watertype with constant value of 1.0
INFO:rompy.schism.grid:Generated windrot_geo2proj with constant value of 0.0
INFO:rompy.schism.grid:Generated drag with constant value of 1.0
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/hgrid.ll
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/hgrid_WWM.gr3
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[PosixPath(&#39;schism_procedural/hgrid.gr3&#39;),
 PosixPath(&#39;schism_procedural/albedo.gr3&#39;),
 PosixPath(&#39;schism_procedural/diffmin.gr3&#39;),
 PosixPath(&#39;schism_procedural/diffmax.gr3&#39;),
 PosixPath(&#39;schism_procedural/watertype.gr3&#39;),
 PosixPath(&#39;schism_procedural/windrot_geo2proj.gr3&#39;),
 PosixPath(&#39;schism_procedural/drag.gr3&#39;),
 PosixPath(&#39;schism_procedural/hgrid.ll&#39;),
 PosixPath(&#39;schism_procedural/hgrid_WWM.gr3&#39;),
 PosixPath(&#39;schism_procedural/vgrid.in&#39;),
 PosixPath(&#39;schism_procedural/wwmbnd.gr3&#39;),
 PosixPath(&#39;schism_procedural/tvd.prop&#39;)]
</pre></div></div>
</div>
</section>
</section>
<section id="Forcing-data">
<h1>Forcing data<a class="headerlink" href="#Forcing-data" title="Link to this heading">#</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First lists import the main data classes</span>
<span class="kn">from</span> <span class="nn">rompy.schism.data</span> <span class="kn">import</span> <span class="n">SCHISMDataSflux</span><span class="p">,</span> <span class="n">SCHISMDataOcean</span><span class="p">,</span> <span class="n">SCHISMDataWave</span><span class="p">,</span> <span class="n">SCHISMDataTides</span>

<span class="c1"># Sets also import a few of the minor classes that are used in the construction of these main classes for use in this demo</span>
<span class="kn">from</span> <span class="nn">rompy.schism.data</span> <span class="kn">import</span> <span class="n">SfluxSource</span><span class="p">,</span> <span class="n">TidalDataset</span><span class="p">,</span> <span class="n">SfluxAir</span><span class="p">,</span> <span class="n">SCHISMDataBoundary</span>

<span class="c1"># And also lets import some of the core data source objects. These are data input abstractions that work in exactly the same way as</span>
<span class="c1"># with the swan classes, and can be used interchangeably in each of the data classes depending on the data source. We will use a</span>
<span class="c1"># bit of a mix here for illustration purposes.</span>
<span class="kn">from</span> <span class="nn">rompy.core.data</span> <span class="kn">import</span> <span class="n">DataBlob</span><span class="p">,</span> <span class="n">SourceFile</span><span class="p">,</span> <span class="n">SourceDataset</span><span class="p">,</span> <span class="n">SourceIntake</span><span class="p">,</span> <span class="n">SourceDatamesh</span>
<span class="kn">from</span> <span class="nn">rompy.core.boundary</span> <span class="kn">import</span> <span class="n">SourceWavespectra</span>
</pre></div>
</div>
</div>
<section id="Sflux-Data">
<h2>Sflux Data<a class="headerlink" href="#Sflux-Data" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rompy.schism.namelists</span> <span class="kn">import</span> <span class="n">Sflux_Inputs</span>
<span class="c1"># SCHISMDataSflux??</span>
<span class="c1"># SfluxSource??</span>
<span class="c1"># Sflux_Inputs??</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">intake</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_catalog</span><span class="p">(</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;..&quot;</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span> <span class="o">/</span> <span class="s2">&quot;catalog.yaml&quot;</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">era5</span><span class="o">.</span><span class="n">to_dask</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ds</span><span class="o">.</span><span class="n">u10</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdBu_r&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;cartopy.mpl.geocollection.GeoQuadMesh at 0x14a780d6a920&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_16_1.png" src="../_images/notebooks_schism_procedural_16_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lets have a look at an flux object. Here we will use a ERA5 dataset exposed through the intake catalog in the tests/data folder.</span>
<span class="kn">from</span> <span class="nn">rompy.core.time</span> <span class="kn">import</span> <span class="n">TimeRange</span>

<span class="n">atmos_forcing</span> <span class="o">=</span> <span class="n">SCHISMDataSflux</span><span class="p">(</span>
    <span class="n">air_1</span><span class="o">=</span><span class="n">SfluxAir</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;air_1&quot;</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="n">SourceIntake</span><span class="p">(</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="s2">&quot;era5&quot;</span><span class="p">,</span>
            <span class="n">catalog_uri</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;..&quot;</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span> <span class="o">/</span> <span class="s2">&quot;catalog.yaml&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="nb">filter</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;coords&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;latitude&quot;</span><span class="p">]},</span>
        <span class="p">},</span>
    <span class="n">buffer</span><span class="o">=</span><span class="mi">2</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">atmos_forcing</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">destdir</span><span class="o">=</span><span class="n">workdir</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">TimeRange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2023-01-02&quot;</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mi">3600</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.schism.data:Fetching air_1
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">workdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;**/*&#39;</span><span class="p">))</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[PosixPath(&#39;schism_procedural/hgrid.gr3&#39;),
 PosixPath(&#39;schism_procedural/albedo.gr3&#39;),
 PosixPath(&#39;schism_procedural/diffmin.gr3&#39;),
 PosixPath(&#39;schism_procedural/diffmax.gr3&#39;),
 PosixPath(&#39;schism_procedural/watertype.gr3&#39;),
 PosixPath(&#39;schism_procedural/windrot_geo2proj.gr3&#39;),
 PosixPath(&#39;schism_procedural/drag.gr3&#39;),
 PosixPath(&#39;schism_procedural/hgrid.ll&#39;),
 PosixPath(&#39;schism_procedural/hgrid_WWM.gr3&#39;),
 PosixPath(&#39;schism_procedural/vgrid.in&#39;),
 PosixPath(&#39;schism_procedural/wwmbnd.gr3&#39;),
 PosixPath(&#39;schism_procedural/tvd.prop&#39;),
 PosixPath(&#39;schism_procedural/sflux&#39;),
 PosixPath(&#39;schism_procedural/sflux/air_1.0001.nc&#39;),
 PosixPath(&#39;schism_procedural/sflux/sflux_inputs.txt&#39;)]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a map</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="c1"># load the data</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">&quot;schism_procedural/sflux/air_1.0001.nc&quot;</span><span class="p">)</span>
<span class="n">wind_speed</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">u10</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">ds</span><span class="o">.</span><span class="n">v10</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># plot the data</span>
<span class="n">wind_speed</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;cartopy.mpl.geocollection.GeoQuadMesh at 0x14a779a5afe0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_19_1.png" src="../_images/notebooks_schism_procedural_19_1.png" />
</div>
</div>
</section>
<section id="Ocean-Boundary">
<h2>Ocean Boundary<a class="headerlink" href="#Ocean-Boundary" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#SCHISMDataOcean??</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span> <span class="o">/</span> <span class="s2">&quot;hycom.nc&quot;</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ds</span><span class="p">[</span><span class="s2">&quot;surf_el&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x14a779ac7910&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_22_1.png" src="../_images/notebooks_schism_procedural_22_1.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">ocean_forcing</span> <span class="o">=</span> <span class="n">SCHISMDataOcean</span><span class="p">(</span>
                <span class="n">elev2D</span> <span class="o">=</span> <span class="n">SCHISMDataBoundary</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;hycom&quot;</span><span class="p">,</span>
                    <span class="n">source</span><span class="o">=</span><span class="n">SourceFile</span><span class="p">(</span>
                        <span class="n">uri</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span> <span class="o">/</span> <span class="s2">&quot;hycom.nc&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">variable</span><span class="o">=</span><span class="s2">&quot;surf_el&quot;</span><span class="p">,</span>
                    <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;ylat&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="s2">&quot;xlon&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="s2">&quot;depth&quot;</span><span class="p">},</span>
                    <span class="n">interpolate_missing_coastal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">)</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ocean_forcing</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">destdir</span><span class="o">=</span><span class="n">workdir</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">workdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.schism.data:Fetching elev2D
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[PosixPath(&#39;schism_procedural/hgrid.gr3&#39;),
 PosixPath(&#39;schism_procedural/albedo.gr3&#39;),
 PosixPath(&#39;schism_procedural/diffmin.gr3&#39;),
 PosixPath(&#39;schism_procedural/diffmax.gr3&#39;),
 PosixPath(&#39;schism_procedural/watertype.gr3&#39;),
 PosixPath(&#39;schism_procedural/windrot_geo2proj.gr3&#39;),
 PosixPath(&#39;schism_procedural/drag.gr3&#39;),
 PosixPath(&#39;schism_procedural/hgrid.ll&#39;),
 PosixPath(&#39;schism_procedural/hgrid_WWM.gr3&#39;),
 PosixPath(&#39;schism_procedural/vgrid.in&#39;),
 PosixPath(&#39;schism_procedural/wwmbnd.gr3&#39;),
 PosixPath(&#39;schism_procedural/tvd.prop&#39;),
 PosixPath(&#39;schism_procedural/sflux&#39;),
 PosixPath(&#39;schism_procedural/elev2D.th.nc&#39;)]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dsb</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;schism_procedural/elev2D.th.nc&#39;</span><span class="p">)</span>
<span class="n">dsb</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;time&#x27; ()&gt; Size: 8B
array(&#x27;2023-01-02T00:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)
Coordinates:
    time     datetime64[ns] 8B 2023-01-02
Attributes:
    long_name:      Time
    standard_name:  time
    base_date:      [2023    1    2    0    0    0]</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'time'</div></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-59d562c0-a5ac-48f3-984d-5f0b9764e4fc' class='xr-array-in' type='checkbox' checked><label for='section-59d562c0-a5ac-48f3-984d-5f0b9764e4fc' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>2023-01-02</span></div><div class='xr-array-data'><pre>array(&#x27;2023-01-02T00:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)</pre></div></div></li><li class='xr-section-item'><input id='section-26985d97-48df-4c98-80c2-ac44f1b4abd9' class='xr-section-summary-in' type='checkbox'  checked><label for='section-26985d97-48df-4c98-80c2-ac44f1b4abd9' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2023-01-02</div><input id='attrs-7682af0b-68d7-4652-b53f-f066529fcc49' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7682af0b-68d7-4652-b53f-f066529fcc49' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cff86f19-7113-4823-a6a2-7c94da4fe600' class='xr-var-data-in' type='checkbox'><label for='data-cff86f19-7113-4823-a6a2-7c94da4fe600' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>base_date :</span></dt><dd>[2023    1    2    0    0    0]</dd></dl></div><div class='xr-var-data'><pre>array(&#x27;2023-01-02T00:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6e9634e3-afa7-4268-af93-e166669de47c' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-6e9634e3-afa7-4268-af93-e166669de47c' class='xr-section-summary'  title='Expand/collapse section'>Indexes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'></ul></div></li><li class='xr-section-item'><input id='section-921e6674-9e27-48d4-b26e-41935e953e9b' class='xr-section-summary-in' type='checkbox'  checked><label for='section-921e6674-9e27-48d4-b26e-41935e953e9b' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>base_date :</span></dt><dd>[2023    1    2    0    0    0]</dd></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.9</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">dsb</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ds</span><span class="p">[</span><span class="s2">&quot;surf_el&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">dsb</span><span class="o">.</span><span class="n">time_series</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">boundary_points</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">c</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>

<span class="c1"># Check for nans (there shouldn&#39;t be any)</span>
<span class="c1"># nans = dsb.time_series.isel(time=0).isnull().squeeze()</span>
<span class="c1"># ax.scatter(x[nans], y[nans], transform=ccrs.PlateCarree(), c=&quot;red&quot;, edgecolor=&quot;black&quot;)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.PathCollection at 0x14a7799a2b00&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_26_1.png" src="../_images/notebooks_schism_procedural_26_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ocean_forcing</span><span class="o">.</span><span class="n">elev2D</span><span class="o">.</span><span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 14kB
Dimensions:  (time: 3, ylat: 46, xlon: 25)
Coordinates:
  * ylat     (ylat) float64 368B -25.0 -24.8 -24.6 -24.4 ... -16.4 -16.2 -16.0
  * xlon     (xlon) float64 200B 145.0 145.4 145.8 146.2 ... 153.8 154.2 154.6
  * time     (time) datetime64[ns] 24B 2023-01-02 2023-01-03 2023-01-04
Data variables:
    surf_el  (time, ylat, xlon) float32 14kB ...
Attributes:
    classification_level:      UNCLASSIFIED
    distribution_statement:    Approved for public release. Distribution unli...
    downgrade_date:            not applicable
    classification_authority:  not applicable
    institution:               Fleet Numerical Meteorology and Oceanography C...
    source:                    HYCOM archive file
    history:                   archv2ncdf2d
    comment:                   p-grid
    field_type:                instantaneous
    Conventions:               CF-1.6 NAVO_netcdf_v1.1</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-d3334c93-93d6-4be3-b3cb-9af397a3776a' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-d3334c93-93d6-4be3-b3cb-9af397a3776a' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 3</li><li><span class='xr-has-index'>ylat</span>: 46</li><li><span class='xr-has-index'>xlon</span>: 25</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-d8fa034c-0729-4ce5-889d-af7c473b8ed0' class='xr-section-summary-in' type='checkbox'  checked><label for='section-d8fa034c-0729-4ce5-889d-af7c473b8ed0' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>ylat</span></div><div class='xr-var-dims'>(ylat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-25.0 -24.8 -24.6 ... -16.2 -16.0</div><input id='attrs-9652f302-ae14-45cc-b19b-8f70b18996f7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9652f302-ae14-45cc-b19b-8f70b18996f7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1489f038-ab19-4562-97b4-8aafda24d924' class='xr-var-data-in' type='checkbox'><label for='data-1489f038-ab19-4562-97b4-8aafda24d924' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>point_spacing :</span></dt><dd>even</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>NAVO_code :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array([-25.      , -24.799999, -24.6     , -24.4     , -24.200001, -24.      ,
       -23.799999, -23.6     , -23.4     , -23.200001, -23.      , -22.799999,
       -22.6     , -22.4     , -22.200001, -22.      , -21.799999, -21.6     ,
       -21.4     , -21.200001, -21.      , -20.799999, -20.6     , -20.4     ,
       -20.200001, -20.      , -19.799999, -19.6     , -19.4     , -19.200001,
       -19.      , -18.799999, -18.6     , -18.4     , -18.200001, -18.      ,
       -17.799999, -17.6     , -17.4     , -17.200001, -17.      , -16.799999,
       -16.6     , -16.4     , -16.200001, -16.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>xlon</span></div><div class='xr-var-dims'>(xlon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>145.0 145.4 145.8 ... 154.2 154.6</div><input id='attrs-6bf6f66b-e53f-4099-b394-d5a28042f223' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6bf6f66b-e53f-4099-b394-d5a28042f223' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3c8c5947-9a97-45a2-a5f1-86fb6887c5d5' class='xr-var-data-in' type='checkbox'><label for='data-3c8c5947-9a97-45a2-a5f1-86fb6887c5d5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>modulo :</span></dt><dd>360 degrees</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>NAVO_code :</span></dt><dd>2</dd></dl></div><div class='xr-var-data'><pre>array([144.959961, 145.359985, 145.76001 , 146.160034, 146.560059, 146.959961,
       147.359985, 147.76001 , 148.160034, 148.560059, 148.959961, 149.359985,
       149.76001 , 150.160034, 150.560059, 150.959961, 151.359985, 151.76001 ,
       152.160034, 152.560059, 152.959961, 153.359985, 153.76001 , 154.160034,
       154.560059])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2023-01-02 2023-01-03 2023-01-04</div><input id='attrs-44ed07ec-3188-49f4-a7be-1236fe69d23e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-44ed07ec-3188-49f4-a7be-1236fe69d23e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bfe4025e-37c2-4e9a-9ba1-4645ceddd5c7' class='xr-var-data-in' type='checkbox'><label for='data-bfe4025e-37c2-4e9a-9ba1-4645ceddd5c7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Valid Time</dd><dt><span>time_origin :</span></dt><dd>2000-01-01 00:00:00</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>NAVO_code :</span></dt><dd>13</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2023-01-02T00:00:00.000000000&#x27;, &#x27;2023-01-03T00:00:00.000000000&#x27;,
       &#x27;2023-01-04T00:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-aef03897-bdd7-4ecd-bd76-ac6a694e6b00' class='xr-section-summary-in' type='checkbox'  checked><label for='section-aef03897-bdd7-4ecd-bd76-ac6a694e6b00' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>surf_el</span></div><div class='xr-var-dims'>(time, ylat, xlon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-26d6c861-0ace-4f16-9573-fbc25bb49109' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-26d6c861-0ace-4f16-9573-fbc25bb49109' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8da40eb0-dcbd-47d4-8d76-af97bc7a376c' class='xr-var-data-in' type='checkbox'><label for='data-8da40eb0-dcbd-47d4-8d76-af97bc7a376c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>_CoordinateAxes :</span></dt><dd>time lat lon </dd><dt><span>long_name :</span></dt><dd>Water Surface Elevation</dd><dt><span>standard_name :</span></dt><dd>sea_surface_elevation</dd><dt><span>units :</span></dt><dd>m</dd><dt><span>NAVO_code :</span></dt><dd>32</dd></dl></div><div class='xr-var-data'><pre>[3450 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-a2d4d3d6-6c39-4e29-9c1a-2dacfaaa3d33' class='xr-section-summary-in' type='checkbox'  ><label for='section-a2d4d3d6-6c39-4e29-9c1a-2dacfaaa3d33' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>ylat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-3dce9719-7e98-400a-8998-41991ea6908a' class='xr-index-data-in' type='checkbox'/><label for='index-3dce9719-7e98-400a-8998-41991ea6908a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([              -25.0, -24.799999237060547, -24.600000381469727,
       -24.399999618530273, -24.200000762939453,               -24.0,
       -23.799999237060547, -23.600000381469727, -23.399999618530273,
       -23.200000762939453,               -23.0, -22.799999237060547,
       -22.600000381469727, -22.399999618530273, -22.200000762939453,
                     -22.0, -21.799999237060547, -21.600000381469727,
       -21.399999618530273, -21.200000762939453,               -21.0,
       -20.799999237060547, -20.600000381469727, -20.399999618530273,
       -20.200000762939453,               -20.0, -19.799999237060547,
       -19.600000381469727, -19.399999618530273, -19.200000762939453,
                     -19.0, -18.799999237060547, -18.600000381469727,
       -18.399999618530273, -18.200000762939453,               -18.0,
       -17.799999237060547, -17.600000381469727, -17.399999618530273,
       -17.200000762939453,               -17.0, -16.799999237060547,
       -16.600000381469727, -16.399999618530273, -16.200000762939453,
                     -16.0],
      dtype=&#x27;float64&#x27;, name=&#x27;ylat&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>xlon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-e37b3208-ea29-48ae-b94c-36040d74d34a' class='xr-index-data-in' type='checkbox'/><label for='index-e37b3208-ea29-48ae-b94c-36040d74d34a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   144.9599609375, 145.3599853515625,  145.760009765625,
       146.1600341796875,   146.56005859375,    146.9599609375,
       147.3599853515625,  147.760009765625, 148.1600341796875,
         148.56005859375,    148.9599609375, 149.3599853515625,
        149.760009765625, 150.1600341796875,   150.56005859375,
          150.9599609375, 151.3599853515625,  151.760009765625,
       152.1600341796875,   152.56005859375,    152.9599609375,
       153.3599853515625,  153.760009765625, 154.1600341796875,
         154.56005859375],
      dtype=&#x27;float64&#x27;, name=&#x27;xlon&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-b85fde3a-27c0-4fae-99c3-39b0b3139e9a' class='xr-index-data-in' type='checkbox'/><label for='index-b85fde3a-27c0-4fae-99c3-39b0b3139e9a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2023-01-02&#x27;, &#x27;2023-01-03&#x27;, &#x27;2023-01-04&#x27;], dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-54ac953c-4582-49b0-85dc-0236b8b27df2' class='xr-section-summary-in' type='checkbox'  ><label for='section-54ac953c-4582-49b0-85dc-0236b8b27df2' class='xr-section-summary' >Attributes: <span>(10)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>classification_level :</span></dt><dd>UNCLASSIFIED</dd><dt><span>distribution_statement :</span></dt><dd>Approved for public release. Distribution unlimited.</dd><dt><span>downgrade_date :</span></dt><dd>not applicable</dd><dt><span>classification_authority :</span></dt><dd>not applicable</dd><dt><span>institution :</span></dt><dd>Fleet Numerical Meteorology and Oceanography Center</dd><dt><span>source :</span></dt><dd>HYCOM archive file</dd><dt><span>history :</span></dt><dd>archv2ncdf2d</dd><dt><span>comment :</span></dt><dd>p-grid</dd><dt><span>field_type :</span></dt><dd>instantaneous</dd><dt><span>Conventions :</span></dt><dd>CF-1.6 NAVO_netcdf_v1.1</dd></dl></div></li></ul></div></div></div>
</div>
</section>
<section id="Wave">
<h2>Wave<a class="headerlink" href="#Wave" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># SCHISMDataWave??</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wave_forcing</span> <span class="o">=</span> <span class="n">SCHISMDataWave</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;wavedata&quot;</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="n">SourceIntake</span><span class="p">(</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="s2">&quot;ausspec&quot;</span><span class="p">,</span>
            <span class="n">catalog_uri</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;..&quot;</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span> <span class="o">/</span> <span class="s2">&quot;catalog.yaml&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="s2">&quot;lat&quot;</span><span class="p">},</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">wave_forcing</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">model_grid</span><span class="o">=</span><span class="n">grid</span><span class="p">)</span>
<span class="n">wave_forcing</span><span class="o">.</span><span class="n">plot_boundary</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;GeoAxes: &gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_31_1.png" src="../_images/notebooks_schism_procedural_31_1.png" />
</div>
</div>
</section>
<section id="Tidal-data">
<h2>Tidal data<a class="headerlink" href="#Tidal-data" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># SCHISMDataTides?</span>
<span class="c1"># TidalDataset?</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tidal_forcing</span> <span class="o">=</span> <span class="n">SCHISMDataTides</span><span class="p">(</span>
    <span class="n">tidal_data</span><span class="o">=</span><span class="n">TidalDataset</span><span class="p">(</span>
        <span class="n">elevations</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span><span class="o">/</span> <span class="s2">&quot;tpxo9-test&quot;</span> <span class="o">/</span> <span class="s2">&quot;h_m2s2n2.nc&quot;</span><span class="p">,</span>
        <span class="n">velocities</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span><span class="o">/</span> <span class="s2">&quot;tpxo9-test&quot;</span> <span class="o">/</span> <span class="s2">&quot;u_m2s2n2.nc&quot;</span>
    <span class="p">),</span>
    <span class="n">constituents</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;M2&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;N2&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">tidal_forcing</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">destdir</span><span class="o">=</span><span class="n">workdir</span><span class="p">,</span>
    <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
    <span class="n">time</span><span class="o">=</span><span class="n">TimeRange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2023-01-02&quot;</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mi">3600</span><span class="p">),</span>
<span class="p">)</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.schism.data:Generating tides
INFO:pyschism.forcing.bctides.bctides:Processing boundary 1:
INFO:pyschism.forcing.bctides.bctides:Elevation type: 5
WARNING:pyschism.forcing.bctides.bctides:Combination of 3 and 4, time history of elevation is read in from elev2D.th.nc!
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent M2.
INFO:pyschism.forcing.bctides.tpxo:h_file is rompy/tests/schism/test_data/tpxo9-test/h_m2s2n2.nc
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent N2.
INFO:pyschism.forcing.bctides.bctides:Velocity type: 3
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent M2.
INFO:pyschism.forcing.bctides.tpxo:u_file is rompy/tests/schism/test_data/tpxo9-test/u_m2s2n2.nc
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent N2.
INFO:pyschism.forcing.bctides.bctides:Temperature type: 0
WARNING:pyschism.forcing.bctides.bctides:Temperature is not sepcified, not input needed!
INFO:pyschism.forcing.bctides.bctides:Salinity type: 0
INFO:pyschism.forcing.bctides.bctides:Salinity is not sepcified, not input needed!
</pre></div></div>
</div>
</section>
</section>
<section id="Full-config-object">
<h1>Full config object<a class="headerlink" href="#Full-config-object" title="Link to this heading">#</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="c1"># Instantiate a config object</span>

<span class="kn">from</span> <span class="nn">rompy.schism</span> <span class="kn">import</span> <span class="n">SchismCSIROConfig</span>
<span class="kn">from</span> <span class="nn">rompy.schism.data</span> <span class="kn">import</span> <span class="n">SCHISMData</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">ValidationError</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">config</span><span class="o">=</span><span class="n">SchismCSIROConfig</span><span class="p">(</span>
        <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">SCHISMData</span><span class="p">(</span>
            <span class="n">atmos</span><span class="o">=</span><span class="n">atmos_forcing</span><span class="p">,</span>
            <span class="n">ocean</span><span class="o">=</span><span class="n">ocean_forcing</span><span class="p">,</span>
            <span class="n">wave</span><span class="o">=</span><span class="n">wave_forcing</span><span class="p">,</span>
            <span class="n">tides</span><span class="o">=</span><span class="n">tidal_forcing</span>
            <span class="p">),</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 validation error for SchismCSIROConfig
  Value error, manning.gr3 must be specified when nchi=-1 [type=value_error, input_value={&#39;grid&#39;: SCHISMGrid([145....], sobc=[1], relax=[]))}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.7/v/value_error
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># That gives us an expected error due to teh fact that we have a validator checking required inputs</span>
<span class="c1"># Lets fix the grid issue and try again</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">config</span><span class="o">=</span><span class="n">SchismCSIROConfig</span><span class="p">(</span>
        <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">SCHISMData</span><span class="p">(</span>
            <span class="n">atmos</span><span class="o">=</span><span class="n">atmos_forcing</span><span class="p">,</span>
            <span class="n">ocean</span><span class="o">=</span><span class="n">ocean_forcing</span><span class="p">,</span>
            <span class="n">wave</span><span class="o">=</span><span class="n">wave_forcing</span><span class="p">,</span>
            <span class="n">tides</span><span class="o">=</span><span class="n">tidal_forcing</span>
            <span class="p">),</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>


<span class="c1"># Again we get a validation error, the hgrid_WWM is missing. Lets add it and try again</span>

<span class="n">grid</span><span class="o">=</span><span class="n">SCHISMGrid</span><span class="p">(</span>
    <span class="n">hgrid</span><span class="o">=</span><span class="n">DataBlob</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;hgrid&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">hgrid</span><span class="p">),</span>
    <span class="n">manning</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">config</span><span class="o">=</span><span class="n">SchismCSIROConfig</span><span class="p">(</span>
    <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
    <span class="n">mesbf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">fricc</span><span class="o">=</span><span class="mf">0.067</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">SCHISMData</span><span class="p">(</span>
        <span class="n">atmos</span><span class="o">=</span><span class="n">atmos_forcing</span><span class="p">,</span>
        <span class="n">ocean</span><span class="o">=</span><span class="n">ocean_forcing</span><span class="p">,</span>
        <span class="n">wave</span><span class="o">=</span><span class="n">wave_forcing</span><span class="p">,</span>
        <span class="n">tides</span><span class="o">=</span><span class="n">tidal_forcing</span>
        <span class="p">),</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:rompy.schism.grid:manning is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 validation error for SchismCSIROConfig
  Value error, manning.gr3 must be specified when nchi=-1 [type=value_error, input_value={&#39;grid&#39;: SCHISMGrid([145....], sobc=[1], relax=[]))}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.7/v/value_error
</pre></div></div>
</div>
</section>
<section id="Model-Run">
<h1>Model Run<a class="headerlink" href="#Model-Run" title="Link to this heading">#</a></h1>
<p>Note that most fields are optional, this eample using defaults values.</p>
<section id="Generate-workspace">
<h2>Generate workspace<a class="headerlink" href="#Generate-workspace" title="Link to this heading">#</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">workdir</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PosixPath(&#39;schism_procedural&#39;)
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># having trouble using the workdir directory due to filesystem busy issues</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#workdir = Path(&#39;schism_procedural2&#39;)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pdb</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Automatic pdb calling has been turned ON
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#if workdir.exists():</span>
<span class="c1">#    rmtree(workdir)</span>

<span class="c1">#workdir.mkdir(exist_ok=True)</span>

<span class="kn">from</span> <span class="nn">rompy.model</span> <span class="kn">import</span> <span class="n">ModelRun</span>
<span class="kn">from</span> <span class="nn">rompy.schism</span> <span class="kn">import</span> <span class="n">SchismCSIROConfig</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">ModelRun</span><span class="p">(</span>
    <span class="n">run_id</span><span class="o">=</span><span class="s2">&quot;test_schism&quot;</span><span class="p">,</span>
    <span class="n">period</span><span class="o">=</span><span class="n">TimeRange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1h&quot;</span><span class="p">),</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">workdir</span><span class="p">),</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span>
<span class="p">)</span>

<span class="n">rundir</span> <span class="o">=</span> <span class="n">run</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.model:
INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Model settings:
INFO:rompy.model:
run_id: test_schism
period:
        Start: 2023-01-01 00:00:00
        End: 2023-01-01 12:00:00
        Duration: 12:00:00
        Interval: 1:00:00
        Include End: True

output_dir: schism_procedural
config: &lt;class &#39;rompy.schism.config.SchismCSIROConfig&#39;&gt;

INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Generating model input files in schism_procedural
INFO:rompy.schism.grid:Generated albedo with constant value of 0.15
INFO:rompy.schism.grid:Generated diffmin with constant value of 1e-06
INFO:rompy.schism.grid:Generated diffmax with constant value of 1.0
INFO:rompy.schism.grid:Generated watertype with constant value of 1.0
INFO:rompy.schism.grid:Generated windrot_geo2proj with constant value of 0.0
INFO:rompy.schism.grid:Generated manning with constant value of 1.0
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/test_schism/hgrid.ll
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/test_schism/hgrid_WWM.gr3
INFO:rompy.schism.data:Fetching air_1
INFO:rompy.schism.data:Fetching elev2D
INFO:rompy.schism.data:Fetching wavedata
INFO:rompy.schism.data:Generating tides
INFO:pyschism.forcing.bctides.bctides:Processing boundary 1:
INFO:pyschism.forcing.bctides.bctides:Elevation type: 5
WARNING:pyschism.forcing.bctides.bctides:Combination of 3 and 4, time history of elevation is read in from elev2D.th.nc!
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent M2.
INFO:pyschism.forcing.bctides.tpxo:h_file is rompy/tests/schism/test_data/tpxo9-test/h_m2s2n2.nc
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent N2.
INFO:pyschism.forcing.bctides.bctides:Velocity type: 3
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent M2.
INFO:pyschism.forcing.bctides.tpxo:u_file is rompy/tests/schism/test_data/tpxo9-test/u_m2s2n2.nc
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent N2.
INFO:pyschism.forcing.bctides.bctides:Temperature type: 0
WARNING:pyschism.forcing.bctides.bctides:Temperature is not sepcified, not input needed!
INFO:pyschism.forcing.bctides.bctides:Salinity type: 0
INFO:pyschism.forcing.bctides.bctides:Salinity is not sepcified, not input needed!
INFO:rompy.model:
INFO:rompy.model:Successfully generated project in schism_procedural
INFO:rompy.model:-----------------------------------------------------
</pre></div></div>
</div>
<section id="Lets-try-that-again-except-using-a-DataBlob-and-then-a-DataBlob-link-for-wave-forcing">
<h3>Lets try that again except using a DataBlob and then a DataBlob link for wave forcing<a class="headerlink" href="#Lets-try-that-again-except-using-a-DataBlob-and-then-a-DataBlob-link-for-wave-forcing" title="Link to this heading">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wave_forcing</span> <span class="o">=</span> <span class="n">DataBlob</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;wavedata&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;../../tests/data/wavedata.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">grid</span><span class="o">=</span><span class="n">SCHISMGrid</span><span class="p">(</span>
    <span class="n">hgrid</span><span class="o">=</span><span class="n">DataBlob</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;hgrid&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">hgrid</span><span class="p">),</span>
    <span class="n">manning</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">config</span><span class="o">=</span><span class="n">SchismCSIROConfig</span><span class="p">(</span>
    <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
    <span class="n">mesbf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">fricc</span><span class="o">=</span><span class="mf">0.067</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">SCHISMData</span><span class="p">(</span>
        <span class="n">atmos</span><span class="o">=</span><span class="n">atmos_forcing</span><span class="p">,</span>
        <span class="n">ocean</span><span class="o">=</span><span class="n">ocean_forcing</span><span class="p">,</span>
        <span class="n">wave</span><span class="o">=</span><span class="n">wave_forcing</span><span class="p">,</span>
        <span class="n">tides</span><span class="o">=</span><span class="n">tidal_forcing</span>
        <span class="p">),</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:rompy.schism.grid:manning is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="kn">from</span> <span class="nn">rompy.model</span> <span class="kn">import</span> <span class="n">ModelRun</span>
<span class="kn">from</span> <span class="nn">rompy.schism</span> <span class="kn">import</span> <span class="n">SchismCSIROConfig</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!rm -rf schism_procedural/2</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">run</span> <span class="o">=</span> <span class="n">ModelRun</span><span class="p">(</span>
    <span class="n">run_id</span><span class="o">=</span><span class="s2">&quot;test_schism&quot;</span><span class="p">,</span>
    <span class="n">period</span><span class="o">=</span><span class="n">TimeRange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1h&quot;</span><span class="p">),</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">workdir</span> <span class="o">/</span> <span class="s1">&#39;2&#39;</span><span class="p">),</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rundir</span> <span class="o">=</span> <span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.model:
INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Model settings:
INFO:rompy.model:
run_id: test_schism
period:
        Start: 2023-01-01 00:00:00
        End: 2023-01-01 12:00:00
        Duration: 12:00:00
        Interval: 1:00:00
        Include End: True

output_dir: schism_procedural/2
config: &lt;class &#39;rompy.schism.config.SchismCSIROConfig&#39;&gt;

INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Generating model input files in schism_procedural/2
INFO:rompy.schism.grid:Generated albedo with constant value of 0.15
INFO:rompy.schism.grid:Generated diffmin with constant value of 1e-06
INFO:rompy.schism.grid:Generated diffmax with constant value of 1.0
INFO:rompy.schism.grid:Generated watertype with constant value of 1.0
INFO:rompy.schism.grid:Generated windrot_geo2proj with constant value of 0.0
INFO:rompy.schism.grid:Generated manning with constant value of 1.0
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/2/test_schism/hgrid.ll
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/2/test_schism/hgrid_WWM.gr3
INFO:rompy.schism.data:Fetching air_1
INFO:rompy.schism.data:Fetching elev2D
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">IndexError</span>                                Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[48], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> rundir <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">run</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/rompy/rompy/model.py:141</span>, in <span class="ansi-cyan-fg">ModelRun.__call__</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    140</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span> <span style="color: rgb(0,0,255)">__call__</span>(<span style="color: rgb(0,135,0)">self</span>):
<span class="ansi-green-fg">--&gt; 141</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">generate</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/rompy/rompy/model.py:98</span>, in <span class="ansi-cyan-fg">ModelRun.generate</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">     93</span> cc_full[<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">runtime</span><span style="color: rgb(175,0,0)">&#34;</span>]<span style="color: rgb(98,98,98)">.</span>update({<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">_datefmt</span><span style="color: rgb(175,0,0)">&#34;</span>: <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_datefmt})
<span class="ansi-green-intense-fg ansi-bold">     95</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">callable</span>(<span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>config):
<span class="ansi-green-intense-fg ansi-bold">     96</span>     <span style="color: rgb(95,135,135)"># Run the __call__() method of the config object if it is callable passing</span>
<span class="ansi-green-intense-fg ansi-bold">     97</span>     <span style="color: rgb(95,135,135)"># the runtime instance, and fill in the context with what is returned</span>
<span class="ansi-green-fg">---&gt; 98</span>     cc_full[<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">config</span><span style="color: rgb(175,0,0)">&#34;</span>] <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">config</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     99</span> <span class="ansi-bold" style="color: rgb(0,135,0)">else</span>:
<span class="ansi-green-intense-fg ansi-bold">    100</span>     <span style="color: rgb(95,135,135)"># Otherwise just fill in the context with the config instance itself</span>
<span class="ansi-green-intense-fg ansi-bold">    101</span>     cc_full[<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">config</span><span style="color: rgb(175,0,0)">&#34;</span>] <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>config

File <span class="ansi-green-fg">~/rompy/rompy/schism/config.py:384</span>, in <span class="ansi-cyan-fg">SchismCSIROConfig.__call__</span><span class="ansi-blue-fg">(self, runtime)</span>
<span class="ansi-green-intense-fg ansi-bold">    381</span> ret[<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">grid</span><span style="color: rgb(175,0,0)">&#34;</span>] <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>grid<span style="color: rgb(98,98,98)">.</span>get(runtime<span style="color: rgb(98,98,98)">.</span>staging_dir)
<span class="ansi-green-intense-fg ansi-bold">    382</span> <span style="color: rgb(95,135,135)"># TODO Still need to link up these maybe?</span>
<span class="ansi-green-intense-fg ansi-bold">    383</span> ret<span style="color: rgb(98,98,98)">.</span>update(
<span class="ansi-green-fg">--&gt; 384</span>     <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">get</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">    385</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">destdir</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">runtime</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">staging_dir</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">grid</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">grid</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">time</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">runtime</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">period</span>
<span class="ansi-green-intense-fg ansi-bold">    386</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    387</span> )
<span class="ansi-green-intense-fg ansi-bold">    388</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> ret

File <span class="ansi-green-fg">~/rompy/rompy/schism/data.py:694</span>, in <span class="ansi-cyan-fg">SCHISMData.get</span><span class="ansi-blue-fg">(self, destdir, grid, time)</span>
<span class="ansi-green-intense-fg ansi-bold">    692</span>     output <span style="color: rgb(98,98,98)">=</span> data<span style="color: rgb(98,98,98)">.</span>get(destdir)
<span class="ansi-green-intense-fg ansi-bold">    693</span> <span class="ansi-bold" style="color: rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">--&gt; 694</span>     output <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">get</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">destdir</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">grid</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">time</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    695</span> ret<span style="color: rgb(98,98,98)">.</span>update({datatype: output})
<span class="ansi-green-intense-fg ansi-bold">    696</span> <span style="color: rgb(95,135,135)"># ret[</span>
<span class="ansi-green-intense-fg ansi-bold">    697</span> <span style="color: rgb(95,135,135)">#     &#34;wave&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">    698</span> <span style="color: rgb(95,135,135)"># ] = &#34;dummy&#34;  # Just to make cookiecutter happy if excluding wave forcing</span>

File <span class="ansi-green-fg">~/rompy/rompy/schism/data.py:547</span>, in <span class="ansi-cyan-fg">SCHISMDataOcean.get</span><span class="ansi-blue-fg">(self, destdir, grid, time)</span>
<span class="ansi-green-intense-fg ansi-bold">    545</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> data <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>:
<span class="ansi-green-intense-fg ansi-bold">    546</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">continue</span>
<span class="ansi-green-fg">--&gt; 547</span> <span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">get</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">destdir</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">grid</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">time</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/rompy/rompy/schism/data.py:407</span>, in <span class="ansi-cyan-fg">SCHISMDataBoundary.get</span><span class="ansi-blue-fg">(self, destdir, grid, time)</span>
<span class="ansi-green-intense-fg ansi-bold">    405</span> <span style="color: rgb(95,135,135)"># prepare xarray.Dataset and save forcing netCDF file</span>
<span class="ansi-green-intense-fg ansi-bold">    406</span> outfile <span style="color: rgb(98,98,98)">=</span> Path(destdir) <span style="color: rgb(98,98,98)">/</span> <span style="color: rgb(175,0,0)">f</span><span style="color: rgb(175,0,0)">&#34;</span><span class="ansi-bold" style="color: rgb(175,95,135)">{</span><span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>id<span class="ansi-bold" style="color: rgb(175,95,135)">}</span><span style="color: rgb(175,0,0)">.th.nc</span><span style="color: rgb(175,0,0)">&#34;</span>
<span class="ansi-green-fg">--&gt; 407</span> boundary_ds <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">boundary_ds</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">grid</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">time</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    408</span> boundary_ds<span style="color: rgb(98,98,98)">.</span>to_netcdf(outfile, <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">w</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">NETCDF3_CLASSIC</span><span style="color: rgb(175,0,0)">&#34;</span>, unlimited_dims<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">time</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">    409</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> outfile

File <span class="ansi-green-fg">~/rompy/rompy/schism/data.py:414</span>, in <span class="ansi-cyan-fg">SCHISMDataBoundary.boundary_ds</span><span class="ansi-blue-fg">(self, grid, time)</span>
<span class="ansi-green-intense-fg ansi-bold">    412</span> logger<span style="color: rgb(98,98,98)">.</span>info(<span style="color: rgb(175,0,0)">f</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Fetching </span><span class="ansi-bold" style="color: rgb(175,95,135)">{</span><span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>id<span class="ansi-bold" style="color: rgb(175,95,135)">}</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">    413</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>crop_data <span class="ansi-bold" style="color: rgb(175,0,255)">and</span> time <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(175,0,255)">not</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">--&gt; 414</span>     <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_filter_time</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">time</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    415</span> ds <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_sel_boundary(grid)
<span class="ansi-green-intense-fg ansi-bold">    416</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">len</span>(ds<span style="color: rgb(98,98,98)">.</span>time) <span style="color: rgb(98,98,98)">&gt;</span> <span style="color: rgb(98,98,98)">1</span>:

File <span class="ansi-green-fg">~/rompy/rompy/core/data.py:413</span>, in <span class="ansi-cyan-fg">DataGrid._filter_time</span><span class="ansi-blue-fg">(self, time, end_buffer)</span>
<span class="ansi-green-intense-fg ansi-bold">    411</span> end <span style="color: rgb(98,98,98)">=</span> time<span style="color: rgb(98,98,98)">.</span>end
<span class="ansi-green-intense-fg ansi-bold">    412</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>coords<span style="color: rgb(98,98,98)">.</span>t <span class="ansi-bold" style="color: rgb(175,0,255)">in</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>ds<span style="color: rgb(98,98,98)">.</span>dims:
<span class="ansi-green-fg">--&gt; 413</span>     dt <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">ds</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">coords</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">t</span><span class="ansi-yellow-bg">]</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">1</span><span class="ansi-yellow-bg">]</span><span style="color: rgb(98,98,98)">.</span>values <span style="color: rgb(98,98,98)">-</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>ds[<span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>coords<span style="color: rgb(98,98,98)">.</span>t][<span style="color: rgb(98,98,98)">0</span>]<span style="color: rgb(98,98,98)">.</span>values
<span class="ansi-green-intense-fg ansi-bold">    414</span>     <span style="color: rgb(95,135,135)"># Convert to regular timedelta64</span>
<span class="ansi-green-intense-fg ansi-bold">    415</span>     regular_timedelta <span style="color: rgb(98,98,98)">=</span> dt<span style="color: rgb(98,98,98)">.</span>astype(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">timedelta64[s]</span><span style="color: rgb(175,0,0)">&#34;</span>)

File <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/dataarray.py:875</span>, in <span class="ansi-cyan-fg">DataArray.__getitem__</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-intense-fg ansi-bold">    872</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_getitem_coord(key)
<span class="ansi-green-intense-fg ansi-bold">    873</span> <span class="ansi-bold" style="color: rgb(0,135,0)">else</span>:
<span class="ansi-green-intense-fg ansi-bold">    874</span>     <span style="color: rgb(95,135,135)"># xarray-style array indexing</span>
<span class="ansi-green-fg">--&gt; 875</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">isel</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">indexers</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_item_key_to_dict</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">key</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/dataarray.py:1508</span>, in <span class="ansi-cyan-fg">DataArray.isel</span><span class="ansi-blue-fg">(self, indexers, drop, missing_dims, **indexers_kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">   1503</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_from_temp_dataset(ds)
<span class="ansi-green-intense-fg ansi-bold">   1505</span> <span style="color: rgb(95,135,135)"># Much faster algorithm for when all indexers are ints, slices, one-dimensional</span>
<span class="ansi-green-intense-fg ansi-bold">   1506</span> <span style="color: rgb(95,135,135)"># lists, or zero or one-dimensional np.ndarray&#39;s</span>
<span class="ansi-green-fg">-&gt; 1508</span> variable <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_variable</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">isel</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">indexers</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">missing_dims</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">missing_dims</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1509</span> indexes, index_variables <span style="color: rgb(98,98,98)">=</span> isel_indexes(<span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>xindexes, indexers)
<span class="ansi-green-intense-fg ansi-bold">   1511</span> coords <span style="color: rgb(98,98,98)">=</span> {}

File <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/variable.py:1033</span>, in <span class="ansi-cyan-fg">Variable.isel</span><span class="ansi-blue-fg">(self, indexers, missing_dims, **indexers_kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">   1030</span> indexers <span style="color: rgb(98,98,98)">=</span> drop_dims_from_indexers(indexers, <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>dims, missing_dims)
<span class="ansi-green-intense-fg ansi-bold">   1032</span> key <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">tuple</span>(indexers<span style="color: rgb(98,98,98)">.</span>get(dim, <span style="color: rgb(0,135,0)">slice</span>(<span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)) <span class="ansi-bold" style="color: rgb(0,135,0)">for</span> dim <span class="ansi-bold" style="color: rgb(175,0,255)">in</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>dims)
<span class="ansi-green-fg">-&gt; 1033</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">key</span><span class="ansi-yellow-bg">]</span>

File <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/variable.py:800</span>, in <span class="ansi-cyan-fg">Variable.__getitem__</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-intense-fg ansi-bold">    797</span> dims, indexer, new_order <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_broadcast_indexes(key)
<span class="ansi-green-intense-fg ansi-bold">    798</span> indexable <span style="color: rgb(98,98,98)">=</span> as_indexable(<span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_data)
<span class="ansi-green-fg">--&gt; 800</span> data <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">indexing</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">apply_indexer</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">indexable</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">indexer</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    802</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> new_order:
<span class="ansi-green-intense-fg ansi-bold">    803</span>     data <span style="color: rgb(98,98,98)">=</span> np<span style="color: rgb(98,98,98)">.</span>moveaxis(data, <span style="color: rgb(0,135,0)">range</span>(<span style="color: rgb(0,135,0)">len</span>(new_order)), new_order)

File <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/indexing.py:1026</span>, in <span class="ansi-cyan-fg">apply_indexer</span><span class="ansi-blue-fg">(indexable, indexer)</span>
<span class="ansi-green-intense-fg ansi-bold">   1024</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> indexable<span style="color: rgb(98,98,98)">.</span>oindex[indexer]
<span class="ansi-green-intense-fg ansi-bold">   1025</span> <span class="ansi-bold" style="color: rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">-&gt; 1026</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">indexable</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">indexer</span><span class="ansi-yellow-bg">]</span>

File <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/indexing.py:1782</span>, in <span class="ansi-cyan-fg">PandasIndexingAdapter.__getitem__</span><span class="ansi-blue-fg">(self, indexer)</span>
<span class="ansi-green-intense-fg ansi-bold">   1779</span>     indexable <span style="color: rgb(98,98,98)">=</span> NumpyIndexingAdapter(np<span style="color: rgb(98,98,98)">.</span>asarray(<span style="color: rgb(0,135,0)">self</span>))
<span class="ansi-green-intense-fg ansi-bold">   1780</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> indexable[indexer]
<span class="ansi-green-fg">-&gt; 1782</span> result <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">array</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">key</span><span class="ansi-yellow-bg">]</span>
<span class="ansi-green-intense-fg ansi-bold">   1784</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_handle_result(result)

File <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/pandas/core/indexes/base.py:5389</span>, in <span class="ansi-cyan-fg">Index.__getitem__</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-intense-fg ansi-bold">   5386</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> is_integer(key) <span class="ansi-bold" style="color: rgb(175,0,255)">or</span> is_float(key):
<span class="ansi-green-intense-fg ansi-bold">   5387</span>     <span style="color: rgb(95,135,135)"># GH#44051 exclude bool, which would return a 2d ndarray</span>
<span class="ansi-green-intense-fg ansi-bold">   5388</span>     key <span style="color: rgb(98,98,98)">=</span> com<span style="color: rgb(98,98,98)">.</span>cast_scalar_indexer(key)
<span class="ansi-green-fg">-&gt; 5389</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">getitem</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">key</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   5391</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">isinstance</span>(key, <span style="color: rgb(0,135,0)">slice</span>):
<span class="ansi-green-intense-fg ansi-bold">   5392</span>     <span style="color: rgb(95,135,135)"># This case is separated from the conditional above to avoid</span>
<span class="ansi-green-intense-fg ansi-bold">   5393</span>     <span style="color: rgb(95,135,135)"># pessimization com.is_bool_indexer and ndim checks.</span>
<span class="ansi-green-intense-fg ansi-bold">   5394</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_getitem_slice(key)

File <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/pandas/core/arrays/datetimelike.py:381</span>, in <span class="ansi-cyan-fg">DatetimeLikeArrayMixin.__getitem__</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-intense-fg ansi-bold">    374</span> <span style="color: rgb(175,0,0)">&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">    375</span> <span style="color: rgb(175,0,0)">This getitem defers to the underlying array, which by-definition can</span>
<span class="ansi-green-intense-fg ansi-bold">    376</span> <span style="color: rgb(175,0,0)">only handle list-likes, slices, and integer scalars</span>
<span class="ansi-green-intense-fg ansi-bold">    377</span> <span style="color: rgb(175,0,0)">&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">    378</span> <span style="color: rgb(95,135,135)"># Use cast as we know we will get back a DatetimeLikeArray or DTScalar,</span>
<span class="ansi-green-intense-fg ansi-bold">    379</span> <span style="color: rgb(95,135,135)"># but skip evaluating the Union at runtime for performance</span>
<span class="ansi-green-intense-fg ansi-bold">    380</span> <span style="color: rgb(95,135,135)"># (see https://github.com/pandas-dev/pandas/pull/44624)</span>
<span class="ansi-green-fg">--&gt; 381</span> result <span style="color: rgb(98,98,98)">=</span> cast(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Union[Self, DTScalarOrNaT]</span><span style="color: rgb(175,0,0)">&#34;</span>, <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">super</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg" style="color: rgb(0,0,255)">__getitem__</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">key</span><span class="ansi-yellow-bg">)</span>)
<span class="ansi-green-intense-fg ansi-bold">    382</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> lib<span style="color: rgb(98,98,98)">.</span>is_scalar(result):
<span class="ansi-green-intense-fg ansi-bold">    383</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> result

File <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/pandas/core/arrays/_mixins.py:284</span>, in <span class="ansi-cyan-fg">NDArrayBackedExtensionArray.__getitem__</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-intense-fg ansi-bold">    278</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span> <span style="color: rgb(0,0,255)">__getitem__</span>(
<span class="ansi-green-intense-fg ansi-bold">    279</span>     <span style="color: rgb(0,135,0)">self</span>,
<span class="ansi-green-intense-fg ansi-bold">    280</span>     key: PositionalIndexer2D,
<span class="ansi-green-intense-fg ansi-bold">    281</span> ) <span style="color: rgb(98,98,98)">-</span><span style="color: rgb(98,98,98)">&gt;</span> Self <span style="color: rgb(98,98,98)">|</span> Any:
<span class="ansi-green-intense-fg ansi-bold">    282</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> lib<span style="color: rgb(98,98,98)">.</span>is_integer(key):
<span class="ansi-green-intense-fg ansi-bold">    283</span>         <span style="color: rgb(95,135,135)"># fast-path</span>
<span class="ansi-green-fg">--&gt; 284</span>         result <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_ndarray</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">key</span><span class="ansi-yellow-bg">]</span>
<span class="ansi-green-intense-fg ansi-bold">    285</span>         <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>ndim <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(98,98,98)">1</span>:
<span class="ansi-green-intense-fg ansi-bold">    286</span>             <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_box_func(result)

<span class="ansi-red-fg">IndexError</span>: index 1 is out of bounds for axis 0 with size 1
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/pandas/core/arrays/_mixins.py</span>(284)<span class="ansi-cyan-fg">__getitem__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">    282 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> lib<span class="ansi-blue-fg">.</span>is_integer<span class="ansi-blue-fg">(</span>key<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">    283 </span><span class="ansi-red-fg">            </span><span class="ansi-red-fg"># fast-path</span>
<span class="ansi-green-fg">--&gt; 284 </span><span class="ansi-red-fg">            </span>result <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_ndarray<span class="ansi-blue-fg">[</span>key<span class="ansi-blue-fg">]</span>
<span class="ansi-green-fg">    285 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>ndim <span class="ansi-blue-fg">==</span> <span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">    286 </span><span class="ansi-red-fg">                </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>_box_func<span class="ansi-blue-fg">(</span>result<span class="ansi-blue-fg">)</span>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  u
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/pandas/core/arrays/datetimelike.py</span>(381)<span class="ansi-cyan-fg">__getitem__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">    379 </span><span class="ansi-red-fg">        </span><span class="ansi-red-fg"># but skip evaluating the Union at runtime for performance</span>
<span class="ansi-green-fg">    380 </span><span class="ansi-red-fg">        </span><span class="ansi-red-fg"># (see https://github.com/pandas-dev/pandas/pull/44624)</span>
<span class="ansi-green-fg">--&gt; 381 </span><span class="ansi-red-fg">        </span>result <span class="ansi-blue-fg">=</span> cast<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;Union[Self, DTScalarOrNaT]&#34;</span><span class="ansi-blue-fg">,</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__getitem__<span class="ansi-blue-fg">(</span>key<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">    382 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> lib<span class="ansi-blue-fg">.</span>is_scalar<span class="ansi-blue-fg">(</span>result<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">    383 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">return</span> result

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  u
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/pandas/core/indexes/base.py</span>(5389)<span class="ansi-cyan-fg">__getitem__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">   5387 </span><span class="ansi-red-fg">            </span><span class="ansi-red-fg"># GH#44051 exclude bool, which would return a 2d ndarray</span>
<span class="ansi-green-fg">   5388 </span><span class="ansi-red-fg">            </span>key <span class="ansi-blue-fg">=</span> com<span class="ansi-blue-fg">.</span>cast_scalar_indexer<span class="ansi-blue-fg">(</span>key<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">-&gt; 5389 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">return</span> getitem<span class="ansi-blue-fg">(</span>key<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">   5390 </span>
<span class="ansi-green-fg">   5391 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> isinstance<span class="ansi-blue-fg">(</span>key<span class="ansi-blue-fg">,</span> slice<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  u
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/indexing.py</span>(1782)<span class="ansi-cyan-fg">__getitem__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">   1780 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">return</span> indexable<span class="ansi-blue-fg">[</span>indexer<span class="ansi-blue-fg">]</span>
<span class="ansi-green-fg">   1781 </span>
<span class="ansi-green-fg">-&gt; 1782 </span><span class="ansi-red-fg">        </span>result <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>array<span class="ansi-blue-fg">[</span>key<span class="ansi-blue-fg">]</span>
<span class="ansi-green-fg">   1783 </span>
<span class="ansi-green-fg">   1784 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>_handle_result<span class="ansi-blue-fg">(</span>result<span class="ansi-blue-fg">)</span>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  u
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/indexing.py</span>(1026)<span class="ansi-cyan-fg">apply_indexer</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">   1024 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">return</span> indexable<span class="ansi-blue-fg">.</span>oindex<span class="ansi-blue-fg">[</span>indexer<span class="ansi-blue-fg">]</span>
<span class="ansi-green-fg">   1025 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">-&gt; 1026 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">return</span> indexable<span class="ansi-blue-fg">[</span>indexer<span class="ansi-blue-fg">]</span>
<span class="ansi-green-fg">   1027 </span>
<span class="ansi-green-fg">   1028 </span>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  u
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/variable.py</span>(800)<span class="ansi-cyan-fg">__getitem__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">    798 </span><span class="ansi-red-fg">        </span>indexable <span class="ansi-blue-fg">=</span> as_indexable<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>_data<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">    799 </span>
<span class="ansi-green-fg">--&gt; 800 </span><span class="ansi-red-fg">        </span>data <span class="ansi-blue-fg">=</span> indexing<span class="ansi-blue-fg">.</span>apply_indexer<span class="ansi-blue-fg">(</span>indexable<span class="ansi-blue-fg">,</span> indexer<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">    801 </span>
<span class="ansi-green-fg">    802 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> new_order<span class="ansi-blue-fg">:</span>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  u
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/variable.py</span>(1033)<span class="ansi-cyan-fg">isel</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">   1031 </span>
<span class="ansi-green-fg">   1032 </span><span class="ansi-red-fg">        </span>key <span class="ansi-blue-fg">=</span> tuple<span class="ansi-blue-fg">(</span>indexers<span class="ansi-blue-fg">.</span>get<span class="ansi-blue-fg">(</span>dim<span class="ansi-blue-fg">,</span> slice<span class="ansi-blue-fg">(</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> dim <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>dims<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">-&gt; 1033 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">[</span>key<span class="ansi-blue-fg">]</span>
<span class="ansi-green-fg">   1034 </span>
<span class="ansi-green-fg">   1035 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">def</span> squeeze<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> dim<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  u
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/dataarray.py</span>(1508)<span class="ansi-cyan-fg">isel</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">   1506 </span><span class="ansi-red-fg">        </span><span class="ansi-red-fg"># lists, or zero or one-dimensional np.ndarray&#39;s</span>
<span class="ansi-green-fg">   1507 </span>
<span class="ansi-green-fg">-&gt; 1508 </span><span class="ansi-red-fg">        </span>variable <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_variable<span class="ansi-blue-fg">.</span>isel<span class="ansi-blue-fg">(</span>indexers<span class="ansi-blue-fg">,</span> missing_dims<span class="ansi-blue-fg">=</span>missing_dims<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">   1509 </span><span class="ansi-red-fg">        </span>indexes<span class="ansi-blue-fg">,</span> index_variables <span class="ansi-blue-fg">=</span> isel_indexes<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>xindexes<span class="ansi-blue-fg">,</span> indexers<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">   1510 </span>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  u
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/g/data/v95/bl8867/rompyenv/lib/python3.10/site-packages/xarray/core/dataarray.py</span>(875)<span class="ansi-cyan-fg">__getitem__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">    873 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">    874 </span><span class="ansi-red-fg">            </span><span class="ansi-red-fg"># xarray-style array indexing</span>
<span class="ansi-green-fg">--&gt; 875 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>isel<span class="ansi-blue-fg">(</span>indexers<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>_item_key_to_dict<span class="ansi-blue-fg">(</span>key<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">    876 </span>
<span class="ansi-green-fg">    877 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">def</span> __setitem__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> key<span class="ansi-blue-fg">:</span> Any<span class="ansi-blue-fg">,</span> value<span class="ansi-blue-fg">:</span> Any<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">-&gt;</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  u
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&gt; <span class="ansi-green-fg">/home/599/bl8867/rompy/rompy/core/data.py</span>(413)<span class="ansi-cyan-fg">_filter_time</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">    411 </span><span class="ansi-red-fg">        </span>end <span class="ansi-blue-fg">=</span> time<span class="ansi-blue-fg">.</span>end
<span class="ansi-green-fg">    412 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>coords<span class="ansi-blue-fg">.</span>t <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>ds<span class="ansi-blue-fg">.</span>dims<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 413 </span><span class="ansi-red-fg">            </span>dt <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>ds<span class="ansi-blue-fg">[</span>self<span class="ansi-blue-fg">.</span>coords<span class="ansi-blue-fg">.</span>t<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>values <span class="ansi-blue-fg">-</span> self<span class="ansi-blue-fg">.</span>ds<span class="ansi-blue-fg">[</span>self<span class="ansi-blue-fg">.</span>coords<span class="ansi-blue-fg">.</span>t<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>values
<span class="ansi-green-fg">    414 </span><span class="ansi-red-fg">            </span><span class="ansi-red-fg"># Convert to regular timedelta64</span>
<span class="ansi-green-fg">    415 </span><span class="ansi-red-fg">            </span>regular_timedelta <span class="ansi-blue-fg">=</span> dt<span class="ansi-blue-fg">.</span>astype<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;timedelta64[s]&#34;</span><span class="ansi-blue-fg">)</span>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  len(self.ds[self.coords.t])
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ipdb&gt;  c
</pre></div></div>
</div>
</section>
</section>
<section id="And-a-DataBlob-symlink">
<h2>And a DataBlob symlink<a class="headerlink" href="#And-a-DataBlob-symlink" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wave_forcing</span> <span class="o">=</span> <span class="n">DataBlob</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;wavedata&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;../../tests/data/wavedata.nc&quot;</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">grid</span><span class="o">=</span><span class="n">SCHISMGrid</span><span class="p">(</span>
    <span class="n">hgrid</span><span class="o">=</span><span class="n">DataBlob</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;hgrid&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">hgrid</span><span class="p">),</span>
    <span class="n">manning</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">config</span><span class="o">=</span><span class="n">SchismCSIROConfig</span><span class="p">(</span>
    <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
    <span class="n">mesbf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">fricc</span><span class="o">=</span><span class="mf">0.067</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">SCHISMData</span><span class="p">(</span>
        <span class="n">atmos</span><span class="o">=</span><span class="n">atmos_forcing</span><span class="p">,</span>
        <span class="n">ocean</span><span class="o">=</span><span class="n">ocean_forcing</span><span class="p">,</span>
        <span class="n">wave</span><span class="o">=</span><span class="n">wave_forcing</span><span class="p">,</span>
        <span class="n">tides</span><span class="o">=</span><span class="n">tidal_forcing</span>
        <span class="p">),</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:rompy.schism.grid:manning is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">workdir</span> <span class="o">/</span> <span class="s1">&#39;3&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PosixPath(&#39;schism_procedural/3&#39;)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="kn">from</span> <span class="nn">rompy.model</span> <span class="kn">import</span> <span class="n">ModelRun</span>
<span class="kn">from</span> <span class="nn">rompy.schism</span> <span class="kn">import</span> <span class="n">SchismCSIROConfig</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">ModelRun</span><span class="p">(</span>
    <span class="n">run_id</span><span class="o">=</span><span class="s2">&quot;test_schism&quot;</span><span class="p">,</span>
    <span class="n">period</span><span class="o">=</span><span class="n">TimeRange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1h&quot;</span><span class="p">),</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">workdir</span> <span class="o">/</span> <span class="s1">&#39;3&#39;</span><span class="p">),</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span>
<span class="p">)</span>

<span class="n">rundir</span> <span class="o">=</span> <span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.model:
INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Model settings:
INFO:rompy.model:
run_id: test_schism
period:
        Start: 2023-01-01 00:00:00
        End: 2023-01-01 12:00:00
        Duration: 12:00:00
        Interval: 1:00:00
        Include End: True

output_dir: schism_procedural/3
config: &lt;class &#39;rompy.schism.config.SchismCSIROConfig&#39;&gt;

INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Generating model input files in schism_procedural/3
INFO:rompy.schism.grid:Generated albedo with constant value of 0.15
INFO:rompy.schism.grid:Generated diffmin with constant value of 1e-06
INFO:rompy.schism.grid:Generated diffmax with constant value of 1.0
INFO:rompy.schism.grid:Generated watertype with constant value of 1.0
INFO:rompy.schism.grid:Generated windrot_geo2proj with constant value of 0.0
INFO:rompy.schism.grid:Generated manning with constant value of 1.0
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/3/test_schism/hgrid.ll
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/3/test_schism/hgrid_WWM.gr3
INFO:rompy.schism.data:Fetching air_1
INFO:rompy.schism.data:Fetching elev2D
INFO:rompy.schism.data:Generating tides
INFO:pyschism.forcing.bctides.bctides:Processing boundary 1:
INFO:pyschism.forcing.bctides.bctides:Elevation type: 5
WARNING:pyschism.forcing.bctides.bctides:Combination of 3 and 4, time history of elevation is read in from elev2D.th.nc!
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent M2.
INFO:pyschism.forcing.bctides.tpxo:h_file is rompy/tests/schism/test_data/tpxo9-test/h_m2s2n2.nc
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent N2.
INFO:pyschism.forcing.bctides.bctides:Velocity type: 3
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent M2.
INFO:pyschism.forcing.bctides.tpxo:u_file is rompy/tests/schism/test_data/tpxo9-test/u_m2s2n2.nc
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent N2.
INFO:pyschism.forcing.bctides.bctides:Temperature type: 0
WARNING:pyschism.forcing.bctides.bctides:Temperature is not sepcified, not input needed!
INFO:pyschism.forcing.bctides.bctides:Salinity type: 0
INFO:pyschism.forcing.bctides.bctides:Salinity is not sepcified, not input needed!
INFO:rompy.model:
INFO:rompy.model:Successfully generated project in schism_procedural/3
INFO:rompy.model:-----------------------------------------------------
</pre></div></div>
</div>
</section>
<section id="Run-schism">
<h2>Run schism<a class="headerlink" href="#Run-schism" title="Link to this heading">#</a></h2>
<p>(Note that paths to schism binaries will have to be updated)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the model</span>
<span class="o">!</span><span class="nb">cd</span><span class="w"> </span>schism_procedural/test_schism<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">4</span><span class="w"> </span>/source/schism/src/_VL_WWM<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/bin/bash: line 1: mpirun: command not found
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Combine outputs</span>
<span class="o">!</span><span class="nb">cd</span><span class="w"> </span>schism_procedural/test_schism/outputs<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>/source/schism/src/Utility/Combining_Scripts/combine_output11.exe<span class="w">  </span>-b<span class="w"> </span><span class="m">1</span><span class="w"> </span>-e<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div>
</section>
<section id="Check-results">
<h2>Check results<a class="headerlink" href="#Check-results" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rundir</span><span class="si">}</span><span class="s2">/outputs&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#load schism files</span>
<span class="n">schfile</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;schism_procedural/test_schism/outputs/schout_1.nc&#39;</span><span class="p">)</span>
<span class="n">schout</span><span class="p">,</span><span class="n">meshtri</span><span class="o">=</span><span class="n">schism_load</span><span class="p">(</span><span class="n">schfile</span><span class="p">)</span>
<span class="n">lons</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_y</span><span class="o">.</span><span class="n">values</span>
<span class="n">lats</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_x</span><span class="o">.</span><span class="n">values</span>
<span class="n">schout</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="c1"># plot gridded fields - elevation</span>
<span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>

    <span class="c1">#fig = plt.figure(facecolor=&#39;w&#39;, figsize=(5,4))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">time</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%b-%Y %H:00&#39;</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                   <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">+</span><span class="mf">0.0005</span><span class="p">,</span><span class="n">lats</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">-</span><span class="mf">0.0002</span><span class="p">),</span> <span class="n">xycoords</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
    <span class="n">cax</span><span class="o">=</span><span class="n">schism_plot</span><span class="p">(</span><span class="n">schout</span><span class="p">,</span> <span class="n">meshtri</span><span class="p">,</span><span class="s1">&#39;elev&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mi">145</span><span class="p">,</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="o">-</span><span class="mi">16</span><span class="p">],</span> <span class="n">project</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plotmesh</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
              <span class="n">vectors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">varscale</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">),</span><span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span> <span class="n">axis</span> <span class="o">=</span> <span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span> <span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">labelsize</span> <span class="o">=</span> <span class="mi">24</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="c1">#figname = &#39;/path_to_your_dir/elev_%02d.png&#39;%ix</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plot gridded fields - Hs</span>
<span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>

    <span class="c1">#fig = plt.figure(facecolor=&#39;w&#39;, figsize=(5,4))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">time</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%b-%Y %H:00&#39;</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                   <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">+</span><span class="mf">0.0005</span><span class="p">,</span><span class="n">lats</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">-</span><span class="mf">0.0002</span><span class="p">),</span> <span class="n">xycoords</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
    <span class="n">cax</span><span class="o">=</span><span class="n">schism_plot</span><span class="p">(</span><span class="n">schout</span><span class="p">,</span> <span class="n">meshtri</span><span class="p">,</span><span class="s1">&#39;WWM_1&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mi">145</span><span class="p">,</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="o">-</span><span class="mi">16</span><span class="p">],</span> <span class="n">project</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plotmesh</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
              <span class="n">vectors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">varscale</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span> <span class="n">axis</span> <span class="o">=</span> <span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span> <span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">labelsize</span> <span class="o">=</span> <span class="mi">24</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="c1">#figname = &#39;/path_to_your_dir/Hs_%02d.png&#39;%ix</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The full model can be dumped to a configuration file.</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="c1"># dump full model to yaml</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;model.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(),</span> <span class="n">f</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>cat<span class="w"> </span>model.yaml
</pre></div>
</div>
</div>
</section>
<section id="Running-from-configuration-files.">
<h2>Running from configuration files.<a class="headerlink" href="#Running-from-configuration-files." title="Link to this heading">#</a></h2>
<p>The full model dump above looks complex due to the fact that the full model state, including all default value, is written to the model.yaml file. The same model configuration can be achived in a much simpler file by simply specifying non default values. For example, the entire configuration above is specified in the demo.yaml file shown below</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>cat<span class="w"> </span>demo.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
output_dir: schism_declaritive
period:
  start: 20230101T00
  end: 20230101T12
  interval: 3600
run_id: test_schism
config:
  model_type: schismcsiro
  mesbf: 1
  fricc: 0.067
  grid:
    grid_type: schism
    hgrid:
      id: hgrid
      model_type: data_blob
        #source: ../../tests/schism/test_data/hgrid.gr3
      source: ../../tests/schism/test_data/hgrid_20kmto60km_rompyschism_testing.gr3
    manning: 1
  data:
    data_type: schism
    atmos:
      air_1:
        source:
          uri:  ../../tests/schism/test_data/atmos.nc
          model_type: open_dataset
        uwind_name: u10
        vwind_name: v10
        prml_name: mslp
        filter:
          sort: {coords: [latitude]}
        buffer: 5
    ocean:
      elev2D:
        buffer: 0.0
        coords:
          t: time
          x: xlon
          y: ylat
          z: depth
        source:
          uri:  ../../tests/schism/test_data/hycom.nc
          model_type: open_dataset
        variable: surf_el
    tides:
      constituents:
      - M2
      - S2
      - N2
      cutoff_depth: 50.0
      flags:
        - [5, 3, 0, 0]
      tidal_data:
        data_type: tidal_dataset
        elevations: ../../tests/schism/test_data/tpxo9-neaus/h_m2s2n2.nc
        velocities: ../../tests/schism/test_data/tpxo9-neaus/u_m2s2n2.nc
    wave:
      buffer: 0.0
      coords:
        t: time
        x: lon
        y: lat
        z: depth
      id: wavedata
      source:
        catalog_uri: ../../tests/data/catalog.yaml
        dataset_id: ausspec
        model_type: intake
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This can be loaded and used to instatiate the model object and run as above, e.g</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="n">demo_config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;demo.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">),</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">ModelRun</span><span class="p">(</span><span class="o">**</span><span class="n">demo_config</span><span class="p">)</span>
<span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:rompy.schism.grid:manning is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
INFO:rompy.model:
INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Model settings:
INFO:rompy.model:
run_id: test_schism
period:
        Start: 2023-01-01 00:00:00
        End: 2023-01-01 12:00:00
        Duration: 12:00:00
        Interval: None
        Include End: True

output_dir: schism_declaritive
config: &lt;class &#39;rompy.schism.config.SchismCSIROConfig&#39;&gt;

INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Generating model input files in schism_declaritive
INFO:rompy.schism.grid:Generated albedo with constant value of 0.15
INFO:rompy.schism.grid:Generated diffmin with constant value of 1e-06
INFO:rompy.schism.grid:Generated diffmax with constant value of 1.0
INFO:rompy.schism.grid:Generated watertype with constant value of 1.0
INFO:rompy.schism.grid:Generated windrot_geo2proj with constant value of 0.0
INFO:rompy.schism.grid:Generated manning with constant value of 1.0
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_declaritive/test_schism/hgrid.ll
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_declaritive/test_schism/hgrid_WWM.gr3
INFO:rompy.schism.data:Fetching air_1
INFO:rompy.schism.data:Fetching elev2D
INFO:rompy.schism.data:Fetching wavedata
INFO:rompy.schism.data:Generating tides
INFO:pyschism.forcing.bctides.bctides:Processing boundary 1:
INFO:pyschism.forcing.bctides.bctides:Elevation type: 5
WARNING:pyschism.forcing.bctides.bctides:Combination of 3 and 4, time history of elevation is read in from elev2D.th.nc!
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent M2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent N2.
INFO:pyschism.forcing.bctides.bctides:Velocity type: 3
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent M2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent N2.
INFO:pyschism.forcing.bctides.bctides:Temperature type: 0
WARNING:pyschism.forcing.bctides.bctides:Temperature is not sepcified, not input needed!
INFO:pyschism.forcing.bctides.bctides:Salinity type: 0
INFO:pyschism.forcing.bctides.bctides:Salinity is not sepcified, not input needed!
INFO:rompy.model:
INFO:rompy.model:Successfully generated project in schism_declaritive
INFO:rompy.model:-----------------------------------------------------
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/source/rompy/notebooks/schism/schism_declaritive/test_schism&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[63]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Alternatively, this same config can be run directly using the rompy cli</span>
<span class="o">!</span>rm<span class="w"> </span>-fr<span class="w"> </span>schism_declaritive<span class="w"> </span>#remove<span class="w"> </span>previous<span class="w"> </span>run
<span class="o">!</span>rompy<span class="w"> </span>schism<span class="w"> </span>demo.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
manning is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
/source/rompy/.venv/lib/python3.11/site-packages/xarray/core/dataset.py:275: UserWarning: The specified chunks separate the stored chunks along dimension &#34;time&#34; starting at index 1. This could degrade performance. Instead, consider rechunking after loading.
  warnings.warn(
/source/rompy/.venv/lib/python3.11/site-packages/intake_xarray/base.py:21: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
/source/rompy/.venv/lib/python3.11/site-packages/pydantic/main.py:308: UserWarning: Pydantic serializer warnings:
  Expected `Union[BaseConfig, SwanConfig, definition-ref, definition-ref, SchismCSIROConfig]` but got `SchismCSIROConfig` - serialized value may not be as expected
  Expected `SfluxSource` but got `str` - serialized value may not be as expected
  Expected `dict[any, any]` but got `str` - serialized value may not be as expected
  Expected `str` but got `int` - serialized value may not be as expected
  return self.__pydantic_serializer__.to_python(
/source/rompy/.venv/lib/python3.11/site-packages/pydantic/main.py:308: UserWarning: Pydantic serializer warnings:
  Expected `SfluxSource` but got `str` - serialized value may not be as expected
  Expected `dict[any, any]` but got `str` - serialized value may not be as expected
  Expected `str` but got `int` - serialized value may not be as expected
  return self.__pydantic_serializer__.to_python(
/source/rompy/.venv/lib/python3.11/site-packages/pydantic/main.py:308: UserWarning: Pydantic serializer warnings:
  Expected `SfluxSource` but got `str` - serialized value may not be as expected
  return self.__pydantic_serializer__.to_python(
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/.venv/lib/python3.11/site-packages/xarray/core/dataset.py:275: UserWarning: The specified chunks separate the stored chunks along dimension &#34;time&#34; starting at index 1. This could degrade performance. Instead, consider rechunking after loading.
  warnings.warn(
/source/rompy/.venv/lib/python3.11/site-packages/intake_xarray/base.py:21: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
/source/rompy/.venv/lib/python3.11/site-packages/xarray/core/dataset.py:275: UserWarning: The specified chunks separate the stored chunks along dimension &#34;time&#34; starting at index 1. This could degrade performance. Instead, consider rechunking after loading.
  warnings.warn(
/source/rompy/.venv/lib/python3.11/site-packages/intake_xarray/base.py:21: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
/source/rompy/.venv/lib/python3.11/site-packages/xarray/core/dataset.py:275: UserWarning: The specified chunks separate the stored chunks along dimension &#34;time&#34; starting at index 1. This could degrade performance. Instead, consider rechunking after loading.
  warnings.warn(
/source/rompy/.venv/lib/python3.11/site-packages/intake_xarray/base.py:21: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/.venv/lib/python3.11/site-packages/wavespectra/output/ww3.py:108: UserWarning: Times can&#39;t be serialized faithfully to int64 with requested units &#39;days since 1990-01-01&#39;. Resolution of &#39;hours&#39; needed. Serializing times to floating point instead. Set encoding[&#39;dtype&#39;] to integer dtype to serialize to int64. Set encoding[&#39;dtype&#39;] to floating point dtype to silence this warning.
  other.to_netcdf(filename)
Combination of 3 and 4, time history of elevation is read in from elev2D.th.nc!
Temperature is not sepcified, not input needed!
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="physics.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">SWAN Physics Components</p>
      </div>
    </a>
    <a class="right-next"
       href="../api.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">API  Documentation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">SCHISM procedural example</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Frontmatter">Frontmatter</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Workspace-basepath">Workspace basepath</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Model-Grid">Model Grid</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#Forcing-data">Forcing data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Sflux-Data">Sflux Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Ocean-Boundary">Ocean Boundary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Wave">Wave</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Tidal-data">Tidal data</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#Full-config-object">Full config object</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#Model-Run">Model Run</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Generate-workspace">Generate workspace</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Lets-try-that-again-except-using-a-DataBlob-and-then-a-DataBlob-link-for-wave-forcing">Lets try that again except using a DataBlob and then a DataBlob link for wave forcing</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#And-a-DataBlob-symlink">And a DataBlob symlink</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Run-schism">Run schism</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Check-results">Check results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Running-from-configuration-files.">Running from configuration files.</a></li>
</ul>
</li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/notebooks/schism_procedural.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
       Copyright 2021, CSIRO and rompy contributors.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.5.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>